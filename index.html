<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="0.0.1-SNAPSHOT">
<title>ZetaPush documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src=".//javascripts/menu.js"></script>
<script type="text/javascript" src=".//javascripts/sidebar.js"></script>
<script type="text/javascript" src=".//javascripts/steps.js"></script>
<script type="text/javascript" src=".//javascripts/sourcecode/source-utils.js"></script>
<script type="text/javascript" src=".//javascripts/sourcecode/highlight-lines.js"></script>
<script type="text/javascript" src=".//javascripts/sourcecode/collapse-lines.js"></script>
<script type="text/javascript" src=".//javascripts/tabcontainer.js"></script>
<script type="text/javascript" src="//unpkg.com/clipboard@2.0.0/dist/clipboard.min.js"></script>
<script type="text/javascript" src=".//javascripts/clipboard.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.js"></script>
<script type="text/javascript" src=".//javascripts/search.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/united/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css"
  /> -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,800" rel="stylesheet">
<link rel="stylesheet" type="text/css" href=".//styles/zetapush-styles.css" />
<link rel="stylesheet" type="text/css" href=".//styles/custom-styles.css" />
<link rel="stylesheet" type="text/css" href=".//styles/tabcontainer.css" />
<link rel="stylesheet" type="text/css" href=".//styles/steps.css" />
<link rel="stylesheet" type="text/css" href=".//styles/sourcecode/collapse-lines.css" />
<link rel="stylesheet" type="text/css" href=".//styles/sourcecode/highlight-lines.css" />
<link rel="stylesheet" type="text/css" href=".//styles/clipboard.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.css">
<script type="text/html" id="hit-template">
  <div class="hit">
    <div class="hit-content">
      <div class="context">
        <a href="{{sourceFile.url}}">{{sourceFile.title}}</a>
        {{#parents}}
          <a href="{{url}}">{{title}}</a>
        {{/parents}}
        <a href="{{url}}">{{{_highlightResult.title.value}}}</a>
      </div>
      <pre class="hit-description">{{{_highlightResult.content.value}}}</pre>
    </div>
  </div>
</script>
<header>
  <nav>
    <div class="main-title"><span></span><i class="fa fa-caret-down"></i></div>
    <ul>
      <li><a href="/documentation"><span>ZetaPush documentation</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/quick-start.html"><span>Quick start</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/developer-manual.html"><span>Developer manual</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/how-to.html"><span>How to guides</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/tutorials.html"><span>Tutorials</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/reference.html"><span>Reference</span><i class="fa fa-angle-right"></i></a></li>
    </ul>
    <div>
      <div class="contact-us">
        <a href="https://spectrum.chat/zetapush" target="_blank">Contact us</a>
      </div>
      <div class="github">
        <a href="https://github.com/zetapush" target="_blank">
          <span>Join us on</span><i class="fa fa-github-alt" title="Github"></i></a>
      </div>
      <div class="search">
        <input id="search-input" placeholder="Search for products">
        <div class="search-results">
            <div id="search-hits"></div>
        </div>
      </div>
      <div class="logo">
        <a href="https://zetapush.com"><span class="icon"></span></a>
      </div>
    </div>
  </nav>
</header>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>ZetaPush documentation</h1>
<div class="details">
<span id="author" class="author">0.0.1-SNAPSHOT</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="#_zetapush_celtia">1. ZetaPush Celtia</a></li>
<li><a href="#_sections">2. Sections</a></li>
<li><a href="#_terms_and_concepts">3. Terms and concepts</a></li>
</ul>
</li>
<li><a href="#_quick_start">Quick Start</a>
<ul class="sectlevel1">
<li><a href="#_system_requirements">4. System requirements</a></li>
<li><a href="#_create_your_first_application">5. Create your first application</a>
<ul class="sectlevel2">
<li><a href="#_from_the_command_line">5.1. From the command line</a></li>
<li><a href="#_generated_project">5.2. Generated project</a></li>
</ul>
</li>
<li><a href="#_run_locally_your_first_project">6. Run locally your first project</a>
<ul class="sectlevel2">
<li><a href="#_from_your_terminal">6.1. From your terminal</a></li>
<li><a href="#_how_it_works">6.2. How it works</a></li>
</ul>
</li>
<li><a href="#_push_your_first_project_in_the_cloud">7. Push your first project in the Cloud</a>
<ul class="sectlevel2">
<li><a href="#_from_your_terminal_2">7.1. From your terminal</a></li>
<li><a href="#_how_it_works_2">7.2. How it works</a></li>
</ul>
</li>
<li><a href="#_what_s_next">8. What&#8217;s next</a></li>
</ul>
</li>
<li><a href="#_developer_manual">Developer manual</a>
<ul class="sectlevel1">
<li><a href="#_requirements">9. Requirements</a>
<ul class="sectlevel2">
<li><a href="#_system_requirements_2">9.1. System requirements</a></li>
<li><a href="#_using_cli">9.2. Using CLI</a>
<ul class="sectlevel3">
<li><a href="#_update_your_path_environement_variable_recommended">9.2.1. Update your PATH environement variable (recommended)</a></li>
<li><a href="#_use_aliases_command_npm_run_command">9.2.2. Use aliases command npm run &lt;command&gt;</a></li>
<li><a href="#_use_npx_tool">9.2.3. Use npx tool</a></li>
<li><a href="#_install_zetapush_cli_as_a_global_command_not_recommended">9.2.4. Install @zetapush/cli as a global command (not recommended)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_account_management">10. Account management</a>
<ul class="sectlevel2">
<li><a href="#_create_a_new_account_and_a_new_application">10.1. Create a new account and a new application</a>
<ul class="sectlevel3">
<li><a href="#_using_zetapush_main_site">10.1.1. Using ZetaPush main site</a></li>
<li><a href="#_using_zetapush_web_console">10.1.2. Using ZetaPush web Console</a></li>
<li><a href="#_using_your_terminal">10.1.3. Using your terminal</a></li>
</ul>
</li>
<li><a href="#_add_a_new_application_to_your_account">10.2. Add a new application to your account</a>
<ul class="sectlevel3">
<li><a href="#_using_zetapush_web_console_2">10.2.1. Using ZetaPush web Console</a></li>
<li><a href="#_using_your_terminal_2">10.2.2. Using your terminal</a></li>
</ul>
</li>
<li><a href="#_configure_your_project_to_use_an_existing_application">10.3. Configure your project to use an existing application</a>
<ul class="sectlevel3">
<li><a href="#_using_your_terminal_3">10.3.1. Using your terminal</a></li>
<li><a href="#_configure_your_project_manually">10.3.2. Configure your project manually</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_develop_your_front_with_zetapush">11. Develop your front with ZetaPush</a>
<ul class="sectlevel2">
<li><a href="#_use_built_in_zetapush_em_cloud_services_em">11.1. Use built-in ZetaPush <em>cloud services</em></a>
<ul class="sectlevel3">
<li><a href="#_requirements_2">11.1.1. Requirements</a></li>
<li><a href="#_use_a_built_in_em_cloud_service_em">11.1.2. Use a built-in <em>cloud service</em></a></li>
</ul>
</li>
<li><a href="#_configure_adapt_zetapush_cloud_services">11.2. Configure/adapt ZetaPush cloud services</a></li>
<li><a href="#_run_your_front_locally">11.3. Run your front locally</a></li>
</ul>
</li>
<li><a href="#_develop_your_business_logic">12. Develop your business logic</a>
<ul class="sectlevel2">
<li><a href="#_what_is_a_em_custom_cloud_service_em">12.1. What is a <em>custom cloud service</em></a>
<ul class="sectlevel3">
<li><a href="#_architecture">12.1.1. Architecture</a></li>
</ul>
</li>
<li><a href="#_define_a_em_custom_cloud_service_em">12.2. Define a <em>custom cloud service</em></a>
<ul class="sectlevel3">
<li><a href="#_create_a_em_cloud_function_em">12.2.1. Create a <em>cloud function</em></a></li>
<li><a href="#_expose_a_em_custom_cloud_service_em">12.2.2. Expose a <em>custom cloud service</em></a></li>
<li><a href="#_dependency_injection">12.2.3. Dependency injection</a></li>
<li><a href="#_use_built_in_em_cloud_service_em">12.2.4. Use built-in <em>cloud service</em></a></li>
<li><a href="#_use_another_em_custom_cloud_service_em">12.2.5. Use another <em>custom cloud service</em></a></li>
</ul>
</li>
<li><a href="#_run_a_em_custom_cloud_service_em">12.3. Run a <em>custom cloud service</em></a></li>
<li><a href="#_use_a_em_custom_cloud_service_em_in_your_front">12.4. Use a <em>custom cloud service</em> in your front</a></li>
<li><a href="#_hot_reload">12.5. Hot reload</a></li>
</ul>
</li>
<li><a href="#_deploy_publish_your_application">13. Deploy/publish your application</a>
<ul class="sectlevel2">
<li><a href="#_what_will_be_deployed">13.1. What will be deployed ?</a>
<ul class="sectlevel3">
<li><a href="#_worker_2">13.1.1. Worker</a></li>
<li><a href="#_front_end">13.1.2. Front end</a></li>
<li><a href="#_applications_and_environments">13.1.3. Applications and environments</a></li>
</ul>
</li>
<li><a href="#_deploy_both_front_and_em_custom_cloud_services_em_on_the_zetapush_cloud">13.2. Deploy both front and <em>custom cloud services</em> on the ZetaPush Cloud</a></li>
<li><a href="#_deploy_your_front_on_the_zetapush_cloud">13.3. Deploy your front on the ZetaPush Cloud</a></li>
<li><a href="#_deploy_your_em_custom_cloud_services_em_on_the_zetapush_cloud">13.4. Deploy your <em>custom cloud services</em> on the ZetaPush Cloud</a></li>
</ul>
</li>
<li><a href="#_debug">14. Debug</a>
<ul class="sectlevel2">
<li><a href="#_debug_your_application_with_vscode">14.1. Debug your application with VSCode</a></li>
<li><a href="#_debug_your_application_with_intellij_based_ide">14.2. Debug your application with IntelliJ based IDE</a></li>
</ul>
</li>
<li><a href="#_testing">15. Testing</a>
<ul class="sectlevel2">
<li><a href="#_unit_testing_your_front">15.1. Unit testing your front</a></li>
<li><a href="#_unit_testing_your_custom_cloud_services">15.2. Unit testing your custom cloud services</a></li>
<li><a href="#_integration_testing_your_front">15.3. Integration testing your front</a></li>
<li><a href="#_integration_testing_your_custom_cloud_services">15.4. Integration testing your custom cloud services</a></li>
<li><a href="#_functional_testing_end_to_end_testing">15.5. Functional testing / end-to-end testing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tutorials">Tutorials</a>
<ul class="sectlevel1">
<li><a href="#_use_case">16. Use case</a>
<ul class="sectlevel2">
<li><a href="#_initialize_your_application">16.1. Initialize your application</a></li>
<li><a href="#_create_your_business_logic">16.2. Create your business logic</a>
<ul class="sectlevel3">
<li><a href="#_import_em_cloud_services_em_and_define_constants">16.2.1. Import <em>cloud services</em> and define constants</a></li>
<li><a href="#_create_the_class_with_its_constructor">16.2.2. Create the class with its constructor</a></li>
<li><a href="#_create_the_chat">16.2.3. Create the chat</a></li>
<li><a href="#_add_user_to_the_conversation">16.2.4. Add user to the conversation</a></li>
<li><a href="#_send_a_message">16.2.5. Send a message</a></li>
<li><a href="#_get_all_messages">16.2.6. Get all messages</a></li>
</ul>
</li>
<li><a href="#_use_your_em_custom_cloud_services_em">16.3. Use your <em>custom cloud services</em></a>
<ul class="sectlevel3">
<li><a href="#_launch_the_worker_locally">16.3.1. Launch the worker locally</a></li>
<li><a href="#_interaction_with_worker">16.3.2. Interaction with worker</a></li>
</ul>
</li>
<li><a href="#_deploy_your_application">16.4. Deploy your application</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_guides">Guides</a></li>
<li><a href="#_faq">FAQ</a></li>
<li><a href="#_reference">Reference</a>
<ul class="sectlevel1">
<li><a href="#_command_line_interface">17. Command Line Interface</a>
<ul class="sectlevel2">
<li><a href="#_initialize_an_application">17.1. Initialize an application</a>
<ul class="sectlevel3">
<li><a href="#_create_a_new_project_and_or_account">17.1.1. Create a new project and/or account</a></li>
</ul>
</li>
<li><a href="#_run_project_locally">17.2. Run project locally</a>
<ul class="sectlevel3">
<li><a href="#_run_front_and_em_custom_cloud_services_em">17.2.1. Run front and <em>custom cloud services</em></a></li>
<li><a href="#_run_only_em_custom_cloud_services_em">17.2.2. Run only <em>custom cloud services</em></a></li>
</ul>
</li>
<li><a href="#_deploy_project_on_the_zetapush_cloud">17.3. Deploy project on the ZetaPush Cloud</a>
<ul class="sectlevel3">
<li><a href="#_deploy_front_and_em_custom_cloud_services_em">17.3.1. Deploy front and <em>custom cloud services</em></a></li>
<li><a href="#_deploy_only_em_custom_cloud_services_em">17.3.2. Deploy only <em>custom cloud services</em></a></li>
<li><a href="#_deploy_only_front">17.3.3. Deploy only front</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_configuration">18. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_account_configuration">18.1. Account configuration</a></li>
<li><a href="#_application_configuration">18.2. Application configuration</a></li>
<li><a href="#_configuration_override">18.3. Configuration override</a>
<ul class="sectlevel3">
<li><a href="#_account_properties">18.3.1. Account properties</a></li>
<li><a href="#_application_properties">18.3.2. Application properties</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_zetapush_cloud_services">19. ZetaPush Cloud Services</a>
<ul class="sectlevel2">
<li><a href="#_user_management">19.1. User Management</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<h1 id="_introduction" class="sect0"><a class="anchor" href="#_introduction"></a><a class="link" href="#_introduction">Introduction</a></h1>
<div class="sect1">
<h2 id="_zetapush_celtia"><a class="anchor" href="#_zetapush_celtia"></a><a class="link" href="#_zetapush_celtia">1. ZetaPush Celtia</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO: Write presentation</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sections"><a class="anchor" href="#_sections"></a><a class="link" href="#_sections">2. Sections</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread sections-shortcut">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="#_quick_start">Quick Start</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="#_tutorials">Tutorials</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="#_guides">Guides</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="#_developer_manual">Developer Manual</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="#_reference">Reference</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">If you want to start using ZetaPush quickly</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">If you want to learn how to use ZetaPush Celtia main features, you can begin here</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">If you want to go into some topics in depth</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">If you want to cover completely each topic</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">If you want to search for a particular piece of information</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_terms_and_concepts"><a class="anchor" href="#_terms_and_concepts"></a><a class="link" href="#_terms_and_concepts">3. Terms and concepts</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Word</th>
<th class="tableblock halign-left valign-middle">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">ZetaPush Account</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A developer account on the ZetaPush platform to create and manage applications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Credentials</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A Login/Password pair of the developer ZetaPush account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Cloud function</p></td>
<td class="tableblock halign-left valign-middle"><div><div class="paragraph">
<p>A single operation that has a name, well-defined behavior, that can accept parameters and can produce an output.</p>
</div>
<div class="paragraph">
<p>This is equivalent to a function in any language except that it is run remotely.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Cloud service</p></td>
<td class="tableblock halign-left valign-middle"><div><div class="paragraph">
<p>Several Cloud functions that are grouped together to cover a coherent set of features. You can consider this as a class (custom cloud service) with methods (cloud functions).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>ZetaPush already provides ready-to-use cloud services.
For example we have: Chat, Groups, Messaging&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>In this documentation, we mention Cloud Services as a shortcut of ZetaPush Cloud Services.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Custom Cloud Service</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A set of features similar to ZetaPush Cloud Services but developed by you. The usage of your custom cloud services is exactly the same as ZetaPush cloud services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Front</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Web pages developed by you (HTML / CSS / JS).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Worker</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A set of Custom cloud services that you have developed to mutualize your business logic.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Organization</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A group of ZetaPush accounts. Each organization may have several managers and several developers. Each person uses his own credentials
to interact with ZetaPush but actions are shared among the organization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Application</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A logical container designed to perform a group of coordinated tasks or activities for the benefit of the user.</p>
<p class="tableblock">An application may have a front part and a worker.</p>
<p class="tableblock">An application has at least one environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Environment</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Your application may be deployed and executed in separate zones called Environments. Each environment is a particular zone that you can organize as you wish.
For example, you can have <code>prod</code>, <code>pre-prod</code>, <code>dev</code> environments for the same application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">CLI</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Command Line Interface: utility scripts that are usable in a terminal to run your code or deploy your application, for example.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Console</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">The main website used to manage your ZetaPush account and applications, read the documentation, monitor your applications&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<h1 id="_quick_start" class="sect0"><a class="anchor" href="#_quick_start"></a><a class="link" href="#_quick_start">Quick Start</a></h1>
<div class="sect1">
<h2 id="_system_requirements"><a class="anchor" href="#_system_requirements"></a><a class="link" href="#_system_requirements">4. System requirements</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>To create an application with ZetaPush you only need the Node.js ecosystem:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Node.js version 8.11.2 (LTS) or higher</p>
</li>
<li>
<p>npm version 5.x or higher</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Node.js is used to:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>create custom cloud services</p>
</li>
<li>
<p>locally run custom cloud services</p>
</li>
<li>
<p>deploy your application on ZetaPush</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Install Node.js and npm</strong></p>
</div>
<div class="paragraph">
<p>Go to <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">Node.js Downloads</a> and follow the installation instructions.</p>
</div>
<div class="paragraph">
<p>You also need to install additional tools for Node.js:</p>
</div>
<div class="paragraph tab-container">
<p>Additional tools</p>
</div>
<div class="paragraph tab">
<p>Windows</p>
</div>
<div class="paragraph">
<p>You must install development tools on Windows (Visual Studio Build Tools and Python).
Fortunately, there is a npm tool that helps you to install all required dependencies.
You must run this command line using <strong>PowerShell</strong> as <strong>Administrator</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">npm install --global --production windows-build-tools</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be patient! It may take a while.</p>
</div>
<div class="paragraph tab">
<p>Debian/Ubuntu</p>
</div>
<div class="paragraph">
<p>Install build tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">sudo apt-get install -y build-essential</code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Enterprise Linux and Fedora</p>
</div>
<div class="paragraph">
<p>Install build tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">sudo yum install gcc-c++ make
# or: sudo yum groupinstall 'Development Tools'</code></pre>
</div>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_your_first_application"><a class="anchor" href="#_create_your_first_application"></a><a class="link" href="#_create_your_first_application">5. Create your first application</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_from_the_command_line"><a class="anchor" href="#_from_the_command_line"></a><a class="link" href="#_from_the_command_line">5.1. From the command line</a></h3>
<div class="listingblock">
<div class="title">Generate application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>first-hello-world</em> is the name of the folder that will be created with all the generated files</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will be prompted for a username and a password in order to create a new account.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Using npm lower than 6</strong></p>
</div>
<div class="paragraph">
<p><code>npm</code> provides <code>npm init</code> command since version 6.</p>
</div>
<div class="paragraph">
<p>You can either upgrade your npm version or use npx utility.</p>
</div>
<div class="paragraph tab-container">
<p>npm 5-</p>
</div>
<div class="paragraph tab">
<p>Upgrade npm</p>
</div>
<div class="listingblock">
<div class="title">Upgrade npm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm install -g npm@latest</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Use npm init</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Use <em>npx</em> to launch the script</p>
</div>
<div class="listingblock">
<div class="title">Launch with npx</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npx @zetapush/create first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="#_account_management">Account management</a> to learn how to manage your account and your applications.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_generated_project"><a class="anchor" href="#_generated_project"></a><a class="link" href="#_generated_project">5.2. Generated project</a></h3>
<div class="imageblock center">
<div class="content">
<img src="./images//hello-world/result.png" alt="result">
</div>
<div class="title">Figure 1. Result of first-hello-world project</div>
</div>
<div class="paragraph">
<p>The generated project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provides a web page (front part)</p>
</li>
<li>
<p>The web page automatically connects to ZetaPush Cloud.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The connection is requested with <code>client.connect()</code> in <code>first-hello-world/front/index.html</code>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The web page displays a button named <code>hello()</code>.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <code>first-hello-world/front/index.html</code>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Provides a custom cloud service that generates a message ("hello world from JavaScript" followed by the date as a timestamp).</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The executed code is available in <code>first-hello-world/worker/index.ts</code>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>When the <code>hello()</code> button is clicked, the custom cloud service is called and the response is displayed in the browser console. The text of the button is also updated with the count of custom cloud services responses.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See call to <code>api.hello()</code> in <code>first-hello-world/front/index.js</code>.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated project files are:</p>
</div>
<div class="listingblock">
<div class="title">Generated tree structure</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">{appName}
├── .zetarc
├── .gitignore
├── front
│   ├── index.html
│   └── index.js
├── worker
│   └── index.ts
├── README.md
└── package.json</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Definition of generated files</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File / Folder</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.zetarc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the developer&#8217;s credentials. Useful to deploy or run your code. The content is auto generated if the file is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.gitignore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prevents publication of your developer credentials (on GitHub for example)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>package.json</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the dependencies, the name of your application, the entry point of your <em>custom cloud services</em> (<code>main</code> property) and many useful other informations for your application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>README.md</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gives you some information about how to use your application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>front/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By convention, the front end code of your application is in this folder. You can change it by editing <code>package.json</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>worker/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By convention, the back end code of your application is in this folder. You can change it by editing <code>package.json</code>.</p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_locally_your_first_project"><a class="anchor" href="#_run_locally_your_first_project"></a><a class="link" href="#_run_locally_your_first_project">6. Run locally your first project</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_from_your_terminal"><a class="anchor" href="#_from_your_terminal"></a><a class="link" href="#_from_your_terminal">6.1. From your terminal</a></h3>
<div class="listingblock">
<div class="title">Start application (front and custom cloud services)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run start -- --serve-front</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run start</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta run --serve-front</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This command launches both a local web server on <code>localhost:3000</code> and the custom cloud services.
You can open a web browser on <code>localhost:3000</code> and open the browser console.</p>
</div>
<div class="paragraph">
<p>You can click on the button and see the result of the custom cloud service call in the browser console.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_it_works"><a class="anchor" href="#_how_it_works"></a><a class="link" href="#_how_it_works">6.2. How it works</a></h3>
<div class="imageblock center">
<div class="content">
<img src="./images//schemas/run-locally.png" alt="run locally">
</div>
<div class="title">Figure 2. Exchanges between web page and custom cloud services</div>
</div>
<div class="paragraph">
<p><span class="exchange-call">➊</span> Clicking on the button triggers a call to the ZetaPush cloud. ZetaPush routes the call to the local Node.js (the Node.js has been registered automatically by the CLI)<br>
<span class="exchange-response">➋</span> The custom cloud service does its job and provides a response. ZetaPush routes the response to the connected web page</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_push_your_first_project_in_the_cloud"><a class="anchor" href="#_push_your_first_project_in_the_cloud"></a><a class="link" href="#_push_your_first_project_in_the_cloud">7. Push your first project in the Cloud</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_from_your_terminal_2"><a class="anchor" href="#_from_your_terminal_2"></a><a class="link" href="#_from_your_terminal_2">7.1. From your terminal</a></h3>
<div class="listingblock">
<div class="title">Deploy application (front and custom cloud services)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run deploy</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta push</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This command uploads your code (front and worker) to the ZetaPush cloud. ZetaPush then handles the deployment
by publishing your front and your custom cloud services.</p>
</div>
<div class="paragraph">
<p>The CLI displays the URL to access the published web page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_it_works_2"><a class="anchor" href="#_how_it_works_2"></a><a class="link" href="#_how_it_works_2">7.2. How it works</a></h3>
<div class="imageblock center">
<div class="content">
<img src="./images//schemas/run-in-cloud.png" alt="run in cloud">
</div>
<div class="title">Figure 3. Exchanges between web page and custom cloud services</div>
</div>
<div class="paragraph">
<p><span class="exchange-call">➊</span> Clicking on the button triggers a call to the ZetaPush cloud which in turn routes directly the call to the hosted Node.js<br>
<span class="exchange-response">➋</span> The custom cloud service does its job and provides a response that ZetaPush routes back to the hosted web page</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_s_next"><a class="anchor" href="#_what_s_next"></a><a class="link" href="#_what_s_next">8. What&#8217;s next</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have created a new application, executed it locally and then published it.</p>
</div>
<div class="paragraph">
<p>Now, you are ready to code your own application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>See <a href="#_develop_your_front_with_zetapush">how to use built-in ZetaPush cloud services</a></p>
</li>
<li>
<p>See <a href="#_develop_your_business_logic">how to develop your custom cloud services</a></p>
</li>
</ul>
</div>
</div>
</div>
<h1 id="_developer_manual" class="sect0"><a class="anchor" href="#_developer_manual"></a><a class="link" href="#_developer_manual">Developer manual</a></h1>
<div class="sect1">
<h2 id="_requirements"><a class="anchor" href="#_requirements"></a><a class="link" href="#_requirements">9. Requirements</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_system_requirements_2"><a class="anchor" href="#_system_requirements_2"></a><a class="link" href="#_system_requirements_2">9.1. System requirements</a></h3>
<div class="paragraph">
<p>To create an application with ZetaPush you only need the Node.js ecosystem:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Node.js version 8.11.2 (LTS) or higher</p>
</li>
<li>
<p>npm version 5.x or higher</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Node.js is used to:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>create custom cloud services</p>
</li>
<li>
<p>locally run custom cloud services</p>
</li>
<li>
<p>deploy your application on ZetaPush</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Install Node.js and npm</strong></p>
</div>
<div class="paragraph">
<p>Go to <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">Node.js Downloads</a> and follow the installation instructions.</p>
</div>
<div class="paragraph">
<p>You also need to install additional tools for Node.js:</p>
</div>
<div class="paragraph tab-container">
<p>Additional tools</p>
</div>
<div class="paragraph tab">
<p>Windows</p>
</div>
<div class="paragraph">
<p>You must install development tools on Windows (Visual Studio Build Tools and Python).
Fortunately, there is a npm tool that helps you to install all required dependencies.
You must run this command line using <strong>PowerShell</strong> as <strong>Administrator</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">npm install --global --production windows-build-tools</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be patient! It may take a while.</p>
</div>
<div class="paragraph tab">
<p>Debian/Ubuntu</p>
</div>
<div class="paragraph">
<p>Install build tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">sudo apt-get install -y build-essential</code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Enterprise Linux and Fedora</p>
</div>
<div class="paragraph">
<p>Install build tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">sudo yum install gcc-c++ make
# or: sudo yum groupinstall 'Development Tools'</code></pre>
</div>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_cli"><a class="anchor" href="#_using_cli"></a><a class="link" href="#_using_cli">9.2. Using CLI</a></h3>
<div class="paragraph">
<p>Once your have your application ready you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run the backend code (Worker) locally</p>
</li>
<li>
<p>Deploy your application</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To do this you need to use the <em>CLI</em>. To install it, launch:</p>
</div>
<div class="sect3">
<h4 id="_update_your_path_environement_variable_recommended"><a class="anchor" href="#_update_your_path_environement_variable_recommended"></a><a class="link" href="#_update_your_path_environement_variable_recommended">9.2.1. Update your PATH environement variable (recommended)</a></h4>
<div class="paragraph tab-container">
<p>Update environement variables</p>
</div>
<div class="paragraph tab">
<p>Debian/Ubuntu/MacOSX</p>
</div>
<div class="paragraph">
<p>You need to add it to your shell config file ~/.zshrc ~/.profile or ~/.bashrc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ export PATH=./node_modules/.bin:$PATH</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this will not automatically update your path for the remainder of the session. To do this, you should run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ source ~/.zshrc
$ source ~/.profile
$ source ~/.bashrc</code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Windows</p>
</div>
<div class="paragraph">
<p>Windows 10 and Windows 8</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Search, search for and then select: System (Control Panel)</p>
</li>
<li>
<p>Click the Advanced system settings link.</p>
</li>
<li>
<p>Click Environment Variables. In the section System Variables, find the PATH environment variable and select it. Click Edit. If the PATH environment variable does not exist, click New.</p>
</li>
<li>
<p>In the Edit System Variable (or New System Variable) window, specify the value of the PATH environment variable. Click OK. Close all remaining windows by clicking OK.</p>
</li>
<li>
<p>Reopen Command prompt window, and run zeta command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Windows 7</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the desktop, right click the Computer icon.</p>
</li>
<li>
<p>Choose Properties from the context menu.</p>
</li>
<li>
<p>Click the Advanced system settings link.</p>
</li>
<li>
<p>Click Environment Variables. In the section System Variables, find the PATH environment variable and select it. Click Edit. If the PATH environment variable does not exist, click New.</p>
</li>
<li>
<p>In the Edit System Variable (or New System Variable) window, specify the value of the PATH environment variable. Click OK. Close all remaining windows by clicking OK.</p>
</li>
<li>
<p>Reopen Command prompt window, and run zeta command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Windows Vista</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the desktop, right click the My Computer icon.</p>
</li>
<li>
<p>Choose Properties from the context menu.</p>
</li>
<li>
<p>Click the Advanced tab (Advanced system settings link in Vista).</p>
</li>
<li>
<p>Click Environment Variables. In the section System Variables, find the PATH environment variable and select it. Click Edit. If the PATH environment variable does not exist, click New.</p>
</li>
<li>
<p>In the Edit System Variable (or New System Variable) window, specify the value of the PATH environment variable. Click OK. Close all remaining windows by clicking OK.</p>
</li>
<li>
<p>Reopen Command prompt window, and run zeta command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Windows XP</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select Start, select Control Panel. double click System, and select the Advanced tab.</p>
</li>
<li>
<p>Click Environment Variables. In the section System Variables, find the PATH environment variable and select it. Click Edit. If the PATH environment variable does not exist, click New.</p>
</li>
<li>
<p>In the Edit System Variable (or New System Variable) window, specify the value of the PATH environment variable. Click OK. Close all remaining windows by clicking OK.</p>
</li>
<li>
<p>Reopen Command prompt window, and run zeta command.</p>
</li>
</ul>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_aliases_command_npm_run_command"><a class="anchor" href="#_use_aliases_command_npm_run_command"></a><a class="link" href="#_use_aliases_command_npm_run_command">9.2.2. Use aliases command npm run &lt;command&gt;</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run start</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_use_npx_tool"><a class="anchor" href="#_use_npx_tool"></a><a class="link" href="#_use_npx_tool">9.2.3. Use npx tool</a></h4>
<div class="paragraph">
<p>npx is shipped with npm standard install</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npx zeta &lt;command&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_install_zetapush_cli_as_a_global_command_not_recommended"><a class="anchor" href="#_install_zetapush_cli_as_a_global_command_not_recommended"></a><a class="link" href="#_install_zetapush_cli_as_a_global_command_not_recommended">9.2.4. Install @zetapush/cli as a global command (not recommended)</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm i -g @angular/cli</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the CLI, you can run your worker with:</p>
</div>
<div class="listingblock">
<div class="title">Run worker</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>$ zeta run</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or deploy your application with:</p>
</div>
<div class="listingblock">
<div class="title">Deploy the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>$ zeta push</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_account_management"><a class="anchor" href="#_account_management"></a><a class="link" href="#_account_management">10. Account management</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/48" class="bare">https://github.com/zetapush/documentation/issues/48</a></p>
</div>
<div class="sect2">
<h3 id="_create_a_new_account_and_a_new_application"><a class="anchor" href="#_create_a_new_account_and_a_new_application"></a><a class="link" href="#_create_a_new_account_and_a_new_application">10.1. Create a new account and a new application</a></h3>
<div class="sect3">
<h4 id="_using_zetapush_main_site"><a class="anchor" href="#_using_zetapush_main_site"></a><a class="link" href="#_using_zetapush_main_site">10.1.1. Using ZetaPush main site</a></h4>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/47" class="bare">https://github.com/zetapush/documentation/issues/47</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_zetapush_web_console"><a class="anchor" href="#_using_zetapush_web_console"></a><a class="link" href="#_using_zetapush_web_console">10.1.2. Using ZetaPush web Console</a></h4>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/49" class="bare">https://github.com/zetapush/documentation/issues/49</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_your_terminal"><a class="anchor" href="#_using_your_terminal"></a><a class="link" href="#_using_your_terminal">10.1.3. Using your terminal</a></h4>
<div class="imageblock center">
<div class="content">
<img src="init-without-account.png" alt="init without account" width="378" height="459">
</div>
</div>
<div class="paragraph">
<p>➊ I launch <code>npm init @zetapush myApp</code> without parameters<br>
➋ You type your email and a password to create your ZetaPush account<br>
➌ The application is created in the <code>myApp</code> folder<br>
➍ The <em>.zetarc</em> file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerLogin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@gmail.com</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">appName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">nameOfAppAutoGenerated</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to confirm your ZetaPush account to run or deploy your application.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_new_application_to_your_account"><a class="anchor" href="#_add_a_new_application_to_your_account"></a><a class="link" href="#_add_a_new_application_to_your_account">10.2. Add a new application to your account</a></h3>
<div class="sect3">
<h4 id="_using_zetapush_web_console_2"><a class="anchor" href="#_using_zetapush_web_console_2"></a><a class="link" href="#_using_zetapush_web_console_2">10.2.1. Using ZetaPush web Console</a></h4>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/50" class="bare">https://github.com/zetapush/documentation/issues/50</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_your_terminal_2"><a class="anchor" href="#_using_your_terminal_2"></a><a class="link" href="#_using_your_terminal_2">10.2.2. Using your terminal</a></h4>
<div class="imageblock center">
<div class="content">
<img src="init-with-account-without-app.png" alt="init with account without app" width="434" height="351">
</div>
</div>
<div class="paragraph">
<p>➊ I launch <code>npm init @zetapush myApp</code> with the <code>--developer-login</code> and <code>--developer-password</code> parameters<br>
➋ The application is created in the <code>myApp</code> folder<br>
➌ The <em>.zetarc</em> file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerLogin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@gmail.com</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">appName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If the <em>appName</em> property in the <em>.zetarc</em> is empty or missing, ZetaPush deploys or executes the code in a new application.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_your_project_to_use_an_existing_application"><a class="anchor" href="#_configure_your_project_to_use_an_existing_application"></a><a class="link" href="#_configure_your_project_to_use_an_existing_application">10.3. Configure your project to use an existing application</a></h3>
<div class="sect3">
<h4 id="_using_your_terminal_3"><a class="anchor" href="#_using_your_terminal_3"></a><a class="link" href="#_using_your_terminal_3">10.3.1. Using your terminal</a></h4>
<div class="imageblock center">
<div class="content">
<img src="init-with-account-and-app.png" alt="init with account and app" width="495" height="351">
</div>
</div>
<div class="paragraph">
<p>➊ I launch <code>npm init @zetapush myApp</code> with the <code>--developer-login</code>, <code>--developer-password</code> and <code>--appName</code> parameters<br>
➋ The application is created in the <code>myApp</code> folder<br>
➌ The <em>.zetarc</em> file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerLogin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@gmail.com</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">appName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">nameOfAppAutoGenerated</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configure_your_project_manually"><a class="anchor" href="#_configure_your_project_manually"></a><a class="link" href="#_configure_your_project_manually">10.3.2. Configure your project manually</a></h4>
<div class="paragraph">
<p>Here the basic source tree you need to create:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">├── .zetarc
├── .gitignore
├── front
│   ├── index.html
│   └── index.js
├── worker
│   └── index.ts
└── package.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see what you need to do for each file in the following section.</p>
</div>
<div class="sect4">
<h5 id="_package_json"><a class="anchor" href="#_package_json"></a><a class="link" href="#_package_json">10.3.2.1. package.json</a></h5>
<div class="paragraph">
<p>The <code>package.json</code> is the most important file in the application. It contains all the information needed to deploy or run your application on the ZetaPush platform (Except the credentials of the ZetaPush account in the <code>.zetarc</code>).</p>
</div>
<div class="paragraph">
<p>The minimal <code>package.json</code> is below:</p>
</div>
<div class="listingblock">
<div class="title">package.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myApp</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">worker/index.ts</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">@zetapush/platform</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">^0.30.0</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="key"><span class="delimiter">&quot;</span><span class="content">@zetapush/cli</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">^0.30.0</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="3"></i><b>(3)</b>
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Entry point of your <a href="#_worker">worker</a>. In this file you will expose your <em>custom cloud services</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Dependency to the <em>ZetaPush Platform</em> to write some <em>custom cloud services</em> and access existing <em>cloud services</em> exposed by ZetaPush</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Dependency to the <a href="#_command_line_interface_cli">CLI</a> (Command Line Interface). Use it to run your worker or deploy your code.</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="_path_to_the_code"><a class="anchor" href="#_path_to_the_code"></a><a class="link" href="#_path_to_the_code">Path to the code</a></h6>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By convention, ZetaPush Celtia considers that your front code is in the directory <code>front</code> and your back end code (worker) in <code>worker</code>. You can change it by setting the path in the <code>package.json</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here is an example of application where the front code is in the directory <code>front/dist</code> and the back code in <code>server</code>:</p>
</div>
<div class="listingblock">
<div class="title">package.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
  <td class="code"><pre>{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myApp</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">worker/index.ts</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">@zetapush/platform</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">^0.30.0</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">@zetapush/cli</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">^0.30.0</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">zetapush</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">front</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./front/dist</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="key"><span class="delimiter">&quot;</span><span class="content">worker</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./server</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="2"></i><b>(2)</b>
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The front code to deploy is in the directory <code>front/dist</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The back code to deploy is in the directory <code>server</code></td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_install_dependencies"><a class="anchor" href="#_install_dependencies"></a><a class="link" href="#_install_dependencies">Install dependencies</a></h6>
<div class="paragraph">
<p>You need to install some dependencies in your application. To do this, you can run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm install --save @zetapush/platform
$ npm install --save @zetapush/cli</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_zetarc"><a class="anchor" href="#_zetarc"></a><a class="link" href="#_zetarc">10.3.2.2. .zetarc</a></h5>
<div class="paragraph">
<p>To specify which account (on the ZetaPush platform) you use for an application, you fill the file <code>.zetarc</code> with the account information.</p>
</div>
<div class="paragraph">
<p>This file is in <strong>JSON</strong> format. The possible properties are below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>developerLogin</em>: Login of the developer account on the ZetaPush platform</p>
</li>
<li>
<p><em>developerPassword</em>: Password of the developer account on the ZetaPush platform</p>
</li>
<li>
<p><em>appName</em>: The name of your application</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">.zetarc</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerLogin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@gmail.com</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">appName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myAppName</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you want to create a new application, you can leave the <em>appName</em> property empty, this will create a new application and fill your <em>.zetarc</em> when you will run or deploy your code.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_front"><a class="anchor" href="#_front"></a><a class="link" href="#_front">10.3.2.3. front</a></h5>
<div class="paragraph">
<p>By convention, the directory contains the front code. For example you can have this tree structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">└── front
    ├── index.html
    └── index.js</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_basic_example_of_hello_world_calling_custom_cloud_service"><a class="anchor" href="#_basic_example_of_hello_world_calling_custom_cloud_service"></a><a class="link" href="#_basic_example_of_hello_world_calling_custom_cloud_service">Basic example of Hello World (calling custom cloud service)</a></h6>
<div class="listingblock">
<div class="title">front/index.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td>
  <td class="code"><pre><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">viewport</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;title&gt;</span>ZetaPush SDK Examples - Worker<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;style&gt;</span>
<span class="inline">    <span class="tag">body</span> {
      <span class="key">font-family</span>: <span class="value">Arial</span>, <span class="value">Helvetica</span>, <span class="value">sans-serif</span>;
    }
    <span class="tag">body</span><span class="pseudo-class">::before</span> {
      <span class="key">display</span>: <span class="value">block</span>;
      <span class="key">content</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Open Your Console</span><span class="delimiter">&quot;</span></span>;
      <span class="key">background</span>: <span class="color">#000</span>;
      <span class="key">color</span>: <span class="color">#FFF</span>;
      <span class="key">position</span>: <span class="value">fixed</span>;
      <span class="key">transform</span>: <span class="error">r</span><span class="error">o</span><span class="error">t</span><span class="error">a</span><span class="error">t</span><span class="error">e</span>(<span class="float">45deg</span>) <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span>(<span class="float">60px</span>, <span class="float">0px</span>);
      <span class="key">right</span>: <span class="float">0</span>;
      <span class="key">top</span>: <span class="float">0</span>;
      <span class="key">height</span>: <span class="float">25px</span>;
      <span class="key">padding</span>: <span class="float">5px</span> <span class="float">30px</span>;
      <span class="key">line-height</span>: <span class="float">25px</span>;
      <span class="key">font-family</span>: <span class="value">Calibri</span>, <span class="value">Helvetica</span>, <span class="value">Arial</span>;
      <span class="key">font-weight</span>: <span class="value">bold</span>;
    }
    <span class="tag">nav</span> {
      <span class="key">display</span>: <span class="value">flex</span>;
      <span class="key">flex-direction</span>: <span class="value">column</span>;
    }
    <span class="tag">button</span>,
    <span class="tag">label</span> {
      <span class="key">margin</span>: <span class="float">0.5</span><span class="value">rem</span> <span class="float">1</span><span class="value">rem</span>;
      <span class="key">height</span>: <span class="float">5</span><span class="value">vh</span>;
      <span class="key">font-size</span>: <span class="error">c</span><span class="error">a</span><span class="error">l</span><span class="error">c</span>(<span class="float">5</span><span class="value">vh</span> / <span class="float">2</span>);
      <span class="key">background</span>: <span class="error">l</span><span class="error">i</span><span class="error">n</span><span class="error">e</span><span class="error">a</span><span class="error">r</span><span class="error">-</span><span class="error">g</span><span class="error">r</span><span class="error">a</span><span class="error">d</span><span class="error">i</span><span class="error">e</span><span class="error">n</span><span class="error">t</span>(<span class="color">rgb(216, 216, 216)</span>, <span class="color">rgb(186, 186, 186)</span>);
      <span class="key">border-color</span>: <span class="color">rgb(117, 117, 117)</span> <span class="color">rgb(107, 107, 107)</span> <span class="color">rgb(97, 97, 97)</span>;
      <span class="key">border-style</span>: <span class="value">solid</span>;
      <span class="key">border-width</span>: <span class="float">1px</span>;
      <span class="key">padding</span>: <span class="float">1px</span> <span class="float">7px</span> <span class="float">2px</span>;
      <span class="key">text-align</span>: <span class="value">center</span>;
      <span class="key">cursor</span>: <span class="value">pointer</span>;
      <span class="key">box-sizing</span>: <span class="value">border-box</span>;
      <span class="key">align-items</span>: <span class="value">flex-start</span>;
    }
    <span class="tag">button</span>[<span class="attribute-name">disabled</span>],
    <span class="tag">label</span>[<span class="attribute-name">disabled</span>] {
      <span class="key">opacity</span>: <span class="float">0.9</span>;
      <span class="key">pointer-events</span>: <span class="value">none</span>;
      <span class="key">cursor</span>: <span class="value">not-allowed</span>;
      <span class="key">color</span>: <span class="value">graytext</span>;
    }</span>
  <span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;/head&gt;</span>

<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;nav&gt;</span>
    <span class="tag">&lt;button</span> <span class="attribute-name">disabled</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js-Hello</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>hello<span class="tag">&lt;/button&gt;</span>
  <span class="tag">&lt;/nav&gt;</span>
  <span class="tag">&lt;main&gt;</span>
    <span class="tag">&lt;ul&gt;</span><span class="tag">&lt;/ul&gt;</span>
  <span class="tag">&lt;/main&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://unpkg.com/@zetapush/client</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://unpkg.com/@zetapush/platform</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./index.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">front/index.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="comment">// Create new ZetaPush Client</span>
const client = <span class="keyword">new</span> ZetaPushClient.WeakClient();
<span class="comment">// Create a proxy to invoked worker methods</span>
const api = client.createProxyTaskService();
<span class="comment">// Handle connection</span>
client.connect().then(() =&gt; (
  console.debug(<span class="string"><span class="delimiter">'</span><span class="content">onConnectionEstablished</span><span class="delimiter">'</span></span>),
  [...document.querySelectorAll(<span class="string"><span class="delimiter">'</span><span class="content">button</span><span class="delimiter">'</span></span>)].forEach((node) =&gt;
    node.removeAttribute(<span class="string"><span class="delimiter">'</span><span class="content">disabled</span><span class="delimiter">'</span></span>),
  )
));
<span class="comment">// Handle DOM events</span>
document.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">.js-Hello</span><span class="delimiter">'</span></span>).addEventListener(<span class="string"><span class="delimiter">'</span><span class="content">click</span><span class="delimiter">'</span></span>, async () =&gt; {
  console.log(await api.hello());
});</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_worker"><a class="anchor" href="#_worker"></a><a class="link" href="#_worker">10.3.2.4. worker</a></h5>
<div class="paragraph">
<p>By convention, the directory contains the back code. For example you can have this tree structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">└── worker
    └── index.ts</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_basic_example_of_hello_world_custom_cloud_service"><a class="anchor" href="#_basic_example_of_hello_world_custom_cloud_service"></a><a class="link" href="#_basic_example_of_hello_world_custom_cloud_service">Basic example of Hello World (custom cloud service)</a></h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>export default class Api {
  /**
   * Get an Hello World string with server side timestamp value
   */
  hello() {
    return `Hello World from JavaScript ${Date.now()}`;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_develop_your_front_with_zetapush"><a class="anchor" href="#_develop_your_front_with_zetapush"></a><a class="link" href="#_develop_your_front_with_zetapush">11. Develop your front with ZetaPush</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may want to quickly provide a web application by just focusing on the visible part and the user experience
instead of wasting time on technical concerns.</p>
</div>
<div class="paragraph">
<p>ZetaPush provides built-in <em>cloud services</em> to increase your productivity that are directly usable by your front.</p>
</div>
<div class="sect2">
<h3 id="_use_built_in_zetapush_em_cloud_services_em"><a class="anchor" href="#_use_built_in_zetapush_em_cloud_services_em"></a><a class="link" href="#_use_built_in_zetapush_em_cloud_services_em">11.1. Use built-in ZetaPush <em>cloud services</em></a></h3>
<div class="paragraph">
<p>On the front-side, you will want to use the <em>cloud services</em> provided by ZetaPush or your <em>custom cloud services</em>.
The usage of a <em>cloud service</em> or a <em>custom cloud service</em> <strong>is exactly the same process</strong>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Currently, we can&#8217;t call a <em>cloud service</em> provided by ZetaPush from the front-end. This will be worked out very soon, and this will be the same syntax that the <em>custom cloud service</em>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_requirements_2"><a class="anchor" href="#_requirements_2"></a><a class="link" href="#_requirements_2">11.1.1. Requirements</a></h4>
<div class="paragraph">
<p>To use services (custom or not), you need to install the ZetaPush Core dependency (<code>@zetapush/client</code>).</p>
</div>
<div class="paragraph">
<p>So you can install it with:</p>
</div>
<div class="listingblock">
<div class="title">Install @zetapush/client via npm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>$ npm install @zetapush/client</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="title">Install @zetapush/client via unpkg</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">&lt;script src=&quot;https://unpkg.com/@zetapush/client&quot;&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_use_a_built_in_em_cloud_service_em"><a class="anchor" href="#_use_a_built_in_em_cloud_service_em"></a><a class="link" href="#_use_a_built_in_em_cloud_service_em">11.1.2. Use a built-in <em>cloud service</em></a></h4>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The usage of a <em>custom cloud service</em> and a <em>cloud service</em> provided by ZetaPush is exactly the same process.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An example is worth a thousand words, so here is an example of usage of services.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When you call a <em>cloud function</em>, the result is always a Promise.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In our example we use this <em>custom cloud service</em> named <code>HelloService</code>:</p>
</div>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>export default class HelloService { <i class="conum" data-value="1"></i><b>(1)</b>
  hello() {
    return `Hello World`;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The service is exported</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we create the HTML page with a button to display the <em>HelloWorld</em> message in the console:</p>
</div>
<div class="listingblock">
<div class="title">front/index.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">viewport</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;title&gt;</span>Celtia<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;/head&gt;</span>

<span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;button</span> <span class="attribute-name">onclick</span>=<span class="string"><span class="delimiter">&quot;</span>hello()<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>hello<span class="tag">&lt;/button&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;ul&gt;</span><span class="tag">&lt;/ul&gt;</span>

    <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://unpkg.com/@zetapush/client</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./index.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>

<span class="tag">&lt;/html&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We call <code>hello()</code>, which in turns calls our <em>custom cloud service</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Dependency to ZetaPush Core</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, we have the front-side code call our services:</p>
</div>
<div class="listingblock">
<div class="title">front/index.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="comment">// Create new ZetaPush Client</span>
const client = <span class="keyword">new</span> ZetaPushClient.WeakClient({ <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">appName</span>: &lt;yourAppName&gt;,
  <span class="key">platformUrl</span>: &lt;optionalUrl&gt;
});
<span class="comment">// Create a proxy to invoked worker methods</span>
const api = client.createProxyTaskService(); <i class="conum" data-value="2"></i><b>(2)</b>
<span class="comment">// Handle connection</span>
client.connect().then(() =&gt; ( <i class="conum" data-value="3"></i><b>(3)</b>
  console.debug(<span class="string"><span class="delimiter">'</span><span class="content">onConnectionEstablished</span><span class="delimiter">'</span></span>),
  [...document.querySelectorAll(<span class="string"><span class="delimiter">'</span><span class="content">button</span><span class="delimiter">'</span></span>)].forEach((node) =&gt;
    node.removeAttribute(<span class="string"><span class="delimiter">'</span><span class="content">disabled</span><span class="delimiter">'</span></span>),
  )
));
<span class="comment">// Handle DOM events</span>
document.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">.js-Hello</span><span class="delimiter">'</span></span>).addEventListener(<span class="string"><span class="delimiter">'</span><span class="content">click</span><span class="delimiter">'</span></span>, async () =&gt; {
  console.log(await api.hello()); <i class="conum" data-value="4"></i><b>(4)</b>
});</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create the ZetaPush client with a specific appName and optional URL</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>API to access our custom service(s)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Connection to the ZetaPush platform</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Call our <em>cloud function</em> and display the result</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Now when we click the button, "Hello World" is displayed on the page.</strong></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">List of available built-in services</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Cloud service</th>
<th class="tableblock halign-center valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="#_user_management">User management</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">TODO: <a href="https://github.com/zetapush/documentation/issues/45" class="bare">https://github.com/zetapush/documentation/issues/45</a></p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_adapt_zetapush_cloud_services"><a class="anchor" href="#_configure_adapt_zetapush_cloud_services"></a><a class="link" href="#_configure_adapt_zetapush_cloud_services">11.2. Configure/adapt ZetaPush cloud services</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/51" class="bare">https://github.com/zetapush/documentation/issues/51</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_run_your_front_locally"><a class="anchor" href="#_run_your_front_locally"></a><a class="link" href="#_run_your_front_locally">11.3. Run your front locally</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/52" class="bare">https://github.com/zetapush/documentation/issues/52</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_develop_your_business_logic"><a class="anchor" href="#_develop_your_business_logic"></a><a class="link" href="#_develop_your_business_logic">12. Develop your business logic</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_is_a_em_custom_cloud_service_em"><a class="anchor" href="#_what_is_a_em_custom_cloud_service_em"></a><a class="link" href="#_what_is_a_em_custom_cloud_service_em">12.1. What is a <em>custom cloud service</em></a></h3>
<div class="paragraph">
<p>A <em>custom cloud service</em> combines many <em>cloud functions</em> like the <em>cloud services</em> exposed by ZetaPush. The only difference is that <strong>you</strong> create the <em>cloud functions</em>.
Generally, you will want to put the <strong>business logic</strong> of your application in the <em>custom cloud services</em>.</p>
</div>
<div class="sect3">
<h4 id="_architecture"><a class="anchor" href="#_architecture"></a><a class="link" href="#_architecture">12.1.1. Architecture</a></h4>
<div class="sect4">
<h5 id="_development_phase"><a class="anchor" href="#_development_phase"></a><a class="link" href="#_development_phase">12.1.1.1. Development phase</a></h5>
<div class="imageblock center">
<div class="content">
<img src="custom-cloud-service-dev.png" alt="custom cloud service dev" width="946" height="591">
</div>
<div class="title">Figure 4. Custom Cloud Service in development phase</div>
</div>
<div class="paragraph">
<p>The worker is running "locally" and interacts with the existing <em>cloud services</em> on the ZetaPush platform and the front code interacts <strong>only</strong> with the <em>custom cloud services</em> that are running "locally"</p>
</div>
</div>
<div class="sect4">
<h5 id="_production_phase"><a class="anchor" href="#_production_phase"></a><a class="link" href="#_production_phase">12.1.1.2. Production phase</a></h5>
<div class="imageblock center">
<div class="content">
<img src="custom-cloud-service-prod.png" alt="custom cloud service prod" width="744" height="251">
</div>
<div class="title">Figure 5. Custom Cloud Service in production phase</div>
</div>
<div class="paragraph">
<p>The front code interacts <strong>only</strong> with the <em>custom cloud services</em> that are running "remotely"</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_define_a_em_custom_cloud_service_em"><a class="anchor" href="#_define_a_em_custom_cloud_service_em"></a><a class="link" href="#_define_a_em_custom_cloud_service_em">12.2. Define a <em>custom cloud service</em></a></h3>
<div class="paragraph">
<p>First, a <em>custom cloud service</em> is a <code>class</code> and its <code>methods</code> are the  <em>cloud functions</em>. So the most basic example of a <em>custom cloud service</em> is below:</p>
</div>
<div class="sect3">
<h4 id="_create_a_em_cloud_function_em"><a class="anchor" href="#_create_a_em_cloud_function_em"></a><a class="link" href="#_create_a_em_cloud_function_em">12.2.1. Create a <em>cloud function</em></a></h4>
<div class="listingblock">
<div class="title">Basic custom cloud service</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="reserved">class</span> HelloWorldAsCustomCloudService {

    constructor() {} <i class="conum" data-value="1"></i><b>(1)</b>

    helloWorld() { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>;
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You always need to add a constructor in a <em>custom cloud service</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>helloWorld</code> is your first <em>cloud function</em> in your <em>custom cloud service</em> named <strong>HelloWorldAsCustomCloudService</strong></td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A <em>cloud function</em> is always asynchronous (with the <em>async</em> keyword or not)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each <em>cloud function</em> in a <em>custom cloud service</em> must follow a specific format.
Only the first parameter is passed, the second is the context of the call.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="reserved">class</span> myCustomCloudService {
    constructor() {}

    myCloudFunction(parameters, context) { <i class="conum" data-value="1"></i><b>(1)</b>
        ...
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>parameters</code> is the first argument passed, it can be an object.
<code>context</code> is the context of the call for this <em>cloud function</em>.
For example you can get the ID of the caller with <code>context.owner</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On the front side, you can use this <em>cloud function</em> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="local-variable">this</span>.api.myCloudFunction({ <span class="key"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">toto</span><span class="delimiter">'</span></span>});
<span class="comment">// Or this.api.myCloudFunction('titi');</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_expose_a_em_custom_cloud_service_em"><a class="anchor" href="#_expose_a_em_custom_cloud_service_em"></a><a class="link" href="#_expose_a_em_custom_cloud_service_em">12.2.2. Expose a <em>custom cloud service</em></a></h4>
<div class="paragraph">
<p>When you create a <em>custom cloud service</em> that you want to expose to the client, you need to declare it. You have 2 cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only one <em>custom cloud service</em> exposed</p>
</li>
<li>
<p>Many <em>custom cloud services</em> exposed</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>package.json</code> has a property named <code>main</code>. It defines the file where the <em>custom cloud services</em> are exposed. The following examples define them in <code>worker/index.ts</code>.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_namespace"><a class="anchor" href="#_namespace"></a><a class="link" href="#_namespace">12.2.2.1. Namespace</a></h5>
<div class="paragraph">
<p>When you call a <em>cloud function</em> from a <em>custom cloud service</em>, you can specify a <em>namespace</em> (if you have 2 <em>cloud functions</em> on 2 differents <em>custom cloud services</em>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em>namespace</em> is never used inside the <em>custom cloud service</em>. The <em>namespace</em> is defined when you expose your <em>custom cloud service</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example we have this service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td>
  <td class="code"><pre><span class="reserved">class</span> Api {
    constructor() {}

    hello(name, context) { <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">return</span> <span class="error">`</span>Hello <span class="predefined">$</span>{name} called by <span class="predefined">$</span>{context.owner}.<span class="error">`</span>;
    }
}

module.exports = {
    <span class="key">api</span>: Api <i class="conum" data-value="2"></i><b>(2)</b>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <em>namespace</em> is never passed here</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We export this <em>custom cloud service</em> with the namespace 'api'</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can call <code>hello()</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="comment">// api is an instance of Api</span>
<span class="local-variable">this</span>.api.hello(<span class="string"><span class="delimiter">'</span><span class="content">Toto</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">api</span><span class="delimiter">'</span></span>); <i class="conum" data-value="1"></i><b>(1)</b></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>We use the method <code>hello()</code> from the namespace <em>api</em>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_only_one_custom_cloud_service_exposed"><a class="anchor" href="#_only_one_custom_cloud_service_exposed"></a><a class="link" href="#_only_one_custom_cloud_service_exposed">12.2.2.2. Only one custom cloud service exposed</a></h5>
<div class="paragraph">
<p>In this example, we have 2 <em>custom cloud services</em>: One is private and the second is exposed:</p>
</div>
<div class="listingblock highlight-lines:15">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/platform';

class Calendar { <i class="conum" data-value="1"></i><b>(1)</b>
  getNow() {
    return new Date().toLocaleDateString();
  }
}

@Injectable()
export default class MyPublicCustomCloudService { <i class="conum" data-value="2"></i><b>(2)</b>
  constructor(
    private calendar: Calendar
  ) {}
  hello() {
    return `Hello World at ${this.calendar.getNow()}`;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Calendar</code> is my private <em>custom cloud service</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We expose only <code>MyPublicCustomCloudService</code> to the client side</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_many_custom_cloud_services_exposed"><a class="anchor" href="#_many_custom_cloud_services_exposed"></a><a class="link" href="#_many_custom_cloud_services_exposed">12.2.2.3. Many custom cloud services exposed</a></h5>
<div class="paragraph">
<p>In this example, we want to expose 2 <em>custom cloud services</em>. In this case, we need to specify the namespace of each <em>custom cloud service</em>:</p>
</div>
<div class="listingblock highlight-lines:21-22">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/platform';

@Injectable()
class Calendar {
  getNow() {
    return new Date().toLocaleDateString();
  }
}

@Injectable()
class HelloService {
  constructor(
    private calendar: Calendar
  ) {}
  hello() {
    return `Hello World at ${this.calendar.getNow()}`;
  }
}

export default  { <i class="conum" data-value="1"></i><b>(1)</b>
  helloService: HelloService,
  calendar: Calendar
};</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We expose the 2 <em>custom cloud services</em> to the client side with the syntax: { <em>namespace1</em>: <em>Service1</em>, <em>namespace2</em>: <em>Service2</em> }</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dependency_injection"><a class="anchor" href="#_dependency_injection"></a><a class="link" href="#_dependency_injection">12.2.3. Dependency injection</a></h4>
<div class="paragraph">
<p>First of all, if you want to include some services (custom or not), you need to use the <em>dependency injection</em> of ZetaPush. This will ease the injection of your dependencies.</p>
</div>
<div class="paragraph">
<p>You need to import the package <code>@zetapush/platform</code> in order to use <code>Inject()</code>. This object will resolve the dependency injection of <em>cloud services</em> and <em>custom cloud services</em>.</p>
</div>
<div class="listingblock">
<div class="title">Install @zetapush/platform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>$ npm install --save @zetapush/platform</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The dependency injection of ZetaPush uses Angular <a href="https://github.com/mgechev/injection-js" target="_blank" rel="noopener">injection-js</a> library.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, to import an other service, you simply need to write:</p>
</div>
<div class="listingblock highlight-lines:6">
<div class="title">Import service</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>import { Injectable, Stack } = require('@zetapush/platform'); <i class="conum" data-value="1"></i><b>(1)</b>
import { MyOtherService } from './services'; <i class="conum" data-value="2"></i><b>(2)</b>

@Injectable()
class MyOwnService {
    constructor(private myOtherService: MyOtherService, private stack: Stack) { <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We import the <code>Inject</code> object and a service (<em>Stack</em>) provided by ZetaPush</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We import an other custom cloud service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We use instances of our injected services in our service throught the constructor</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you import a <em>custom cloud service</em> or a <em>cloud service</em> provided by ZetaPush, you use both similarily</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_built_in_em_cloud_service_em"><a class="anchor" href="#_use_built_in_em_cloud_service_em"></a><a class="link" href="#_use_built_in_em_cloud_service_em">12.2.4. Use built-in <em>cloud service</em></a></h4>
<div class="paragraph">
<p>Once you have imported the services, you can use them.</p>
</div>
<div class="paragraph">
<p>In this example, we will use the <code>Stack</code> <em>cloud service</em> provided by ZetaPush.
In our use-case, we want to put some data associated with the current timestamp and be able to list all stored data.</p>
</div>
<div class="paragraph">
<p>For this the <code>Stack</code> service provides some methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>push({ <em>stack</em>: string, <em>data</em>: object });</code></p>
</li>
<li>
<p><code>list({ <em>stack</em>: string });</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Stack</code> service has asynchronous methods
</td>
</tr>
</table>
</div>
<div class="listingblock highlight-lines:6-8">
<div class="title">MyStorageService</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td>
  <td class="code"><pre>import { Injectable, Stack } from '@zetapush/platform';

@Injectable()
export default class MyStorageService {
  private stackName = 'stack-example';
  constructor(<i class="conum" data-value="2"></i><b>(2)</b>
    private stack: Stack
  ) {}
  /**
   *  Store data with associated timestamp
   */
  storeWithTimestamp(value: any) {
    return this.stack.push({
      stack: this.stackName,
      data: {
        value,
        timestamp: Date.now()
      }
    });
  }

  /**
   * List all stored data
   */
  getAllData() {
    return this.stack.list({
      stack: this.stackName
    });
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We import the <code>Stack</code> service</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>stack</code> is an instance of <code>Stack</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_use_another_em_custom_cloud_service_em"><a class="anchor" href="#_use_another_em_custom_cloud_service_em"></a><a class="link" href="#_use_another_em_custom_cloud_service_em">12.2.5. Use another <em>custom cloud service</em></a></h4>
<div class="paragraph">
<p>Once you have imported the services, you can use them.</p>
</div>
<div class="paragraph">
<p>In this example, we will have 2 <em>custom cloud services</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Calendar</code>: Utils function to return the current date</p>
</li>
<li>
<p><code>HelloWorldService</code>: Basic example using <code>Calendar</code> <em>cloud function</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first <em>custom cloud service</em> (<code>Calendar</code>) is in the file: "worker/calendar.js".</p>
</div>
<div class="listingblock">
<div class="title">worker/calendar.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>export class Calendar {
  getNow() { <i class="conum" data-value="1"></i><b>(1)</b>
    return new Date().toLocalDateString('fr-FR');
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The only <em>cloud function</em> of the <code>Calendar</code> service</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then, we have the <code>HelloWorldService</code> that use our <code>Calendar</code> service. It is in the file: "./worker/index.ts".</p>
</div>
<div class="listingblock highlight-lines:7,13">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/platform';
import { Calendar } from './calendar'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
class HelloWorldService {
  constructor( <i class="conum" data-value="2"></i><b>(2)</b>
    private calendar: Calendar
  ) {}
  /**
   * Return 'Hello World' with current date
   */
  helloWorldWithDate() {
    return `Hello world at ${this.calendar.getNow()}`;
 }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We import the <code>Calendar</code> service</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>calendar</code> is an instance of <code>Calendar</code></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_a_em_custom_cloud_service_em"><a class="anchor" href="#_run_a_em_custom_cloud_service_em"></a><a class="link" href="#_run_a_em_custom_cloud_service_em">12.3. Run a <em>custom cloud service</em></a></h3>
<div class="listingblock">
<div class="title">Start custom cloud services locally</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run start</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run start</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta run</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_use_a_em_custom_cloud_service_em_in_your_front"><a class="anchor" href="#_use_a_em_custom_cloud_service_em_in_your_front"></a><a class="link" href="#_use_a_em_custom_cloud_service_em_in_your_front">12.4. Use a <em>custom cloud service</em> in your front</a></h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The usage of a <em>custom cloud service</em> and a <em>cloud service</em> provided by ZetaPush is exactly the same process.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An example is worth a thousand words, so here is an example of usage of services.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When you call a <em>cloud function</em>, the result is always a Promise.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In our example we use this <em>custom cloud service</em> named <code>HelloService</code>:</p>
</div>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>export default class HelloService { <i class="conum" data-value="1"></i><b>(1)</b>
  hello() {
    return `Hello World`;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The service is exported</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we create the HTML page with a button to display the <em>HelloWorld</em> message in the console:</p>
</div>
<div class="listingblock">
<div class="title">front/index.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">viewport</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;title&gt;</span>Celtia<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;/head&gt;</span>

<span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;button</span> <span class="attribute-name">onclick</span>=<span class="string"><span class="delimiter">&quot;</span>hello()<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>hello<span class="tag">&lt;/button&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;ul&gt;</span><span class="tag">&lt;/ul&gt;</span>

    <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://unpkg.com/@zetapush/client</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./index.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>

<span class="tag">&lt;/html&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We call <code>hello()</code>, which in turns calls our <em>custom cloud service</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Dependency to ZetaPush Core</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, we have the front-side code call our services:</p>
</div>
<div class="listingblock">
<div class="title">front/index.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="comment">// Create new ZetaPush Client</span>
const client = <span class="keyword">new</span> ZetaPushClient.WeakClient({ <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">appName</span>: &lt;yourAppName&gt;,
  <span class="key">platformUrl</span>: &lt;optionalUrl&gt;
});
<span class="comment">// Create a proxy to invoked worker methods</span>
const api = client.createProxyTaskService(); <i class="conum" data-value="2"></i><b>(2)</b>
<span class="comment">// Handle connection</span>
client.connect().then(() =&gt; ( <i class="conum" data-value="3"></i><b>(3)</b>
  console.debug(<span class="string"><span class="delimiter">'</span><span class="content">onConnectionEstablished</span><span class="delimiter">'</span></span>),
  [...document.querySelectorAll(<span class="string"><span class="delimiter">'</span><span class="content">button</span><span class="delimiter">'</span></span>)].forEach((node) =&gt;
    node.removeAttribute(<span class="string"><span class="delimiter">'</span><span class="content">disabled</span><span class="delimiter">'</span></span>),
  )
));
<span class="comment">// Handle DOM events</span>
document.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">.js-Hello</span><span class="delimiter">'</span></span>).addEventListener(<span class="string"><span class="delimiter">'</span><span class="content">click</span><span class="delimiter">'</span></span>, async () =&gt; {
  console.log(await api.hello()); <i class="conum" data-value="4"></i><b>(4)</b>
});</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create the ZetaPush client with a specific appName and optional URL</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>API to access our custom service(s)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Connection to the ZetaPush platform</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Call our <em>cloud function</em> and display the result</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Now when we click the button, "Hello World" is displayed on the page.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="_hot_reload"><a class="anchor" href="#_hot_reload"></a><a class="link" href="#_hot_reload">12.5. Hot reload</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/53" class="bare">https://github.com/zetapush/documentation/issues/53</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploy_publish_your_application"><a class="anchor" href="#_deploy_publish_your_application"></a><a class="link" href="#_deploy_publish_your_application">13. Deploy/publish your application</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have developed your application and tested it, you may want to deploy it on the ZetaPush cloud.</p>
</div>
<div class="sect2">
<h3 id="_what_will_be_deployed"><a class="anchor" href="#_what_will_be_deployed"></a><a class="link" href="#_what_will_be_deployed">13.1. What will be deployed ?</a></h3>
<div class="paragraph">
<p>In the <em>deployment</em> with ZetaPush, you have 2 parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hosting and scalability of the worker (<em>custom cloud services</em>)</p>
</li>
<li>
<p>Hosting of the front end</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_worker_2"><a class="anchor" href="#_worker_2"></a><a class="link" href="#_worker_2">13.1.1. Worker</a></h4>
<div class="paragraph">
<p>When you deploy the worker (<em>custom cloud services</em>) of your application, we take care of the hosting of your code. In addition, we manage the scability of your application.</p>
</div>
</div>
<div class="sect3">
<h4 id="_front_end"><a class="anchor" href="#_front_end"></a><a class="link" href="#_front_end">13.1.2. Front end</a></h4>
<div class="paragraph">
<p>For the front end part, we host your application and return you an unique URL to access to your application. We also link your front end logic with the differents services you need (<em>custom cloud services</em> or <em>cloud services</em> provided by ZetaPush).</p>
</div>
</div>
<div class="sect3">
<h4 id="_applications_and_environments"><a class="anchor" href="#_applications_and_environments"></a><a class="link" href="#_applications_and_environments">13.1.3. Applications and environments</a></h4>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/54" class="bare">https://github.com/zetapush/documentation/issues/54</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_both_front_and_em_custom_cloud_services_em_on_the_zetapush_cloud"><a class="anchor" href="#_deploy_both_front_and_em_custom_cloud_services_em_on_the_zetapush_cloud"></a><a class="link" href="#_deploy_both_front_and_em_custom_cloud_services_em_on_the_zetapush_cloud">13.2. Deploy both front and <em>custom cloud services</em> on the ZetaPush Cloud</a></h3>
<div class="paragraph">
<p>The deployment is very easy, to do this you only need to launch this command in your application directory:</p>
</div>
<div class="listingblock">
<div class="title">Deploy the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run deploy</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta push</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The command will read the <code>.zetarc</code> file. If there is no <em>developerLogin</em> and <em>developerPassword</em> properties or if the ZetaPush account is not validated, you will not be able to push your application.</p>
</div>
<div class="paragraph">
<p>About the <em>appName</em> property, if it is empty, the CLI will deploy your code on a new application.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When you deploy your application (Front + Worker), the CLI returns you an unique URL to use it.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_your_front_on_the_zetapush_cloud"><a class="anchor" href="#_deploy_your_front_on_the_zetapush_cloud"></a><a class="link" href="#_deploy_your_front_on_the_zetapush_cloud">13.3. Deploy your front on the ZetaPush Cloud</a></h3>
<div class="paragraph">
<p>If you want to only deploy the front part of your application on the ZetaPush platform, you can launch:</p>
</div>
<div class="listingblock">
<div class="title">Deploy the worker</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy -- --front</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run deploy</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta push --front</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this case your worker is not deployed at all.</p>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_your_em_custom_cloud_services_em_on_the_zetapush_cloud"><a class="anchor" href="#_deploy_your_em_custom_cloud_services_em_on_the_zetapush_cloud"></a><a class="link" href="#_deploy_your_em_custom_cloud_services_em_on_the_zetapush_cloud">13.4. Deploy your <em>custom cloud services</em> on the ZetaPush Cloud</a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em>Worker</em> is the back end of your application. Generally you put your business logic inside it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you want to deploy your worker only on the ZetaPush platform, you can launch:</p>
</div>
<div class="listingblock">
<div class="title">Deploy the worker</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy -- --worker</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run deploy</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta push --worker</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this case you only deploy your back end code, so no URL will be returned.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debug"><a class="anchor" href="#_debug"></a><a class="link" href="#_debug">14. Debug</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_debug_your_application_with_vscode"><a class="anchor" href="#_debug_your_application_with_vscode"></a><a class="link" href="#_debug_your_application_with_vscode">14.1. Debug your application with VSCode</a></h3>
<div class="paragraph">
<p>VSCode provide a powerfull debugging feature <a href="https://code.visualstudio.com/docs/editor/debugging" class="bare">https://code.visualstudio.com/docs/editor/debugging</a>.</p>
</div>
<div class="paragraph">
<p>Add a launch configuration with the following structure.</p>
</div>
<div class="listingblock">
<div class="title">Configure .vscode/launch.json file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre>{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">0.2.0</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">configurations</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">zeta run</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">node</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">launch</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">program</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">${workspaceRoot}/node_modules/.bin/zeta</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">stopOnEntry</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceMaps</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">args</span><span class="delimiter">&quot;</span></span>: [ <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">run</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">--serve-front</span><span class="delimiter">&quot;</span></span>
      ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">cwd</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">${workspaceRoot}</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">console</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">internalConsole</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Launch configuration name</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>zeta command arguments</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run VSCode debugger</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images//debug/run-vscode-debugger.png" alt="Run VSCode debugger">
</div>
</div>
<div class="paragraph">
<p>You can run Debugger by following the official  VSCode documentation: <a href="https://code.visualstudio.com/docs/editor/debugging" class="bare">https://code.visualstudio.com/docs/editor/debugging</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_debug_your_application_with_intellij_based_ide"><a class="anchor" href="#_debug_your_application_with_intellij_based_ide"></a><a class="link" href="#_debug_your_application_with_intellij_based_ide">14.2. Debug your application with IntelliJ based IDE</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/81" class="bare">https://github.com/zetapush/documentation/issues/81</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a><a class="link" href="#_testing">15. Testing</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/55" class="bare">https://github.com/zetapush/documentation/issues/55</a></p>
</div>
<div class="sect2">
<h3 id="_unit_testing_your_front"><a class="anchor" href="#_unit_testing_your_front"></a><a class="link" href="#_unit_testing_your_front">15.1. Unit testing your front</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/56" class="bare">https://github.com/zetapush/documentation/issues/56</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_unit_testing_your_custom_cloud_services"><a class="anchor" href="#_unit_testing_your_custom_cloud_services"></a><a class="link" href="#_unit_testing_your_custom_cloud_services">15.2. Unit testing your custom cloud services</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/57" class="bare">https://github.com/zetapush/documentation/issues/57</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_integration_testing_your_front"><a class="anchor" href="#_integration_testing_your_front"></a><a class="link" href="#_integration_testing_your_front">15.3. Integration testing your front</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/58" class="bare">https://github.com/zetapush/documentation/issues/58</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_integration_testing_your_custom_cloud_services"><a class="anchor" href="#_integration_testing_your_custom_cloud_services"></a><a class="link" href="#_integration_testing_your_custom_cloud_services">15.4. Integration testing your custom cloud services</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/59" class="bare">https://github.com/zetapush/documentation/issues/59</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_functional_testing_end_to_end_testing"><a class="anchor" href="#_functional_testing_end_to_end_testing"></a><a class="link" href="#_functional_testing_end_to_end_testing">15.5. Functional testing / end-to-end testing</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/60" class="bare">https://github.com/zetapush/documentation/issues/60</a></p>
</div>
</div>
</div>
</div>
<h1 id="_tutorials" class="sect0"><a class="anchor" href="#_tutorials"></a><a class="link" href="#_tutorials">Tutorials</a></h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>In this tutorial, you will create an application with ZetaPush, from the initialization to the deployment.
You will learn to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add business logic with ZetaPush</p>
</li>
<li>
<p>Use <em>cloud services</em> provided by ZetaPush</p>
</li>
<li>
<p>Run your code locally</p>
</li>
<li>
<p>Deploy your application</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_case"><a class="anchor" href="#_use_case"></a><a class="link" href="#_use_case">16. Use case</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will create a realtime chat application, but it will be particular: This will be an <strong>Avengers Chat</strong> !</p>
</div>
<div class="paragraph">
<p>At the beginning, the user of the chat can choose an Avenger. Each character has many skills and they can use them on the chat to attack the others Avengers.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. List of skills by Avenger</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Avenger</th>
<th class="tableblock halign-center valign-middle">Skill</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Captain America</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Shoot of shield / Cure</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Falcon</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Archery / Super vision</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Iron Man</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Flight / Missile launcher</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Hulk</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Punch / Regeneration</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Thor</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Hammer hit / Lightning strike</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Spider Man</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Shoot of cobweb / Jump with cobweb</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Wolverine</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Scratch / Regeneration</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You will create this application in few steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#_initialize_your_application">Initialize a new application</a></p>
</li>
<li>
<p><a href="#_create_your_business_logic">Create the business logic in a <em>custom cloud service</em></a></p>
</li>
<li>
<p><a href="#_use_your_em_custom_cloud_services_em">Use your <em>custom cloud service</em> in your UI</a></p>
</li>
<li>
<p><a href="#_deploy_your_application">Deploy your application</a></p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
We recommend to use <em>TypeScript</em> so in this tutorial all of your code will be in this language.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_initialize_your_application"><a class="anchor" href="#_initialize_your_application"></a><a class="link" href="#_initialize_your_application">16.1. Initialize your application</a></h3>
<div class="paragraph">
<p>In the first step, you need to create your application. To do this you can run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>npm init @zetapush myApp</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will ask you your developer login and password.</p>
</div>
<div class="paragraph">
<p>This command will create you an account on the ZetaPush platform and will create your first application in the <em>myApp</em> directory.
An email will be sent to confirm your account.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To use your application, you need to validate your account. To do this, click on the link in the received email
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this tutorial, we are focusing on the ZetaPush development. So, to begin, get all resources and add them to your application (css, assets, &#8230;&#8203;):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>$ cd myApp/front/
$ rm -r ./*
$ curl -X GET 'http://github-download-subfolder.zpush.io/?owner=zetapush&amp;repository=zetapush-tutorials&amp;path=avengersChat/front' --output front.zip
$ unzip front.zip &amp;&amp; rm front.zip
</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you are using <em>Windows</em>, you can download the file with all resources and unzip it in the front directory. Link: <a href="http://github-download-subfolder.zpush.io/?owner=zetapush&amp;repository=zetapush-tutorials&amp;path=avengersChat/front" class="bare">http://github-download-subfolder.zpush.io/?owner=zetapush&amp;repository=zetapush-tutorials&amp;path=avengersChat/front</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So you already have the style and the frontend logic in the folders <code>assets</code> and <code>utils</code>. You can browse these files to understand this code.</p>
</div>
<div class="paragraph">
<p>In this tutorial, you need to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the business logic with a <em>custom cloud service</em></p>
</li>
<li>
<p>Implement the interaction with the <em>custom cloud service</em> (front side)</p>
</li>
<li>
<p>Deploy your application</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_your_business_logic"><a class="anchor" href="#_create_your_business_logic"></a><a class="link" href="#_create_your_business_logic">16.2. Create your business logic</a></h3>
<div class="paragraph">
<p>Now, you will create the business logic of your application. To do this, you will use a <em>custom cloud service</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <em>custom cloud service</em> is a class where you develop a business logic. You can create several <em>custom cloud services</em> inside one application. Each <em>custom cloud service</em> can use the <em>cloud services</em> provided by ZetaPush.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In your existing application you already have a <em>custom cloud service</em> on the file <code>worker/index.ts</code> (The entry point of the service is defined in the <code>package.json</code> with the property <code>main</code>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To use your <em>custom cloud services</em> you need to export them. To do this, the property <code>main</code> in your <code>package.json</code> define the path of the file where you export all of your <em>custom cloud services</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can delete the content of the file <code>worker/index.ts</code> and fill it with the following content step by step.</p>
</div>
<div class="sect3">
<h4 id="_import_em_cloud_services_em_and_define_constants"><a class="anchor" href="#_import_em_cloud_services_em_and_define_constants"></a><a class="link" href="#_import_em_cloud_services_em_and_define_constants">16.2.1. Import <em>cloud services</em> and define constants</a></h4>
<div class="paragraph">
<p>First, you need to import the <em>cloud services</em> provided by ZetaPush, used in this application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Stack</em> (Save data in a stack)</p>
</li>
<li>
<p><em>Messaging</em> (Send and receive messages)</p>
</li>
<li>
<p><em>GroupManagement</em> (Manage group of users)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You also need to import <em>Injectable</em> that is useful for the dependencies injection.</p>
</div>
<div class="listingblock">
<div class="title">Imports and constants</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>import { Stack, Messaging, GroupManagement, Injectable } from '@zetapush/platform';

const CONVERSATION_ID = 'avengersChat';
const CHANNEL_MESSAGING = 'avengersChannel'; <i class="conum" data-value="1"></i><b>(1)</b></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Channel on which the users send and listen to the messages</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_class_with_its_constructor"><a class="anchor" href="#_create_the_class_with_its_constructor"></a><a class="link" href="#_create_the_class_with_its_constructor">16.2.2. Create the class with its constructor</a></h4>
<div class="paragraph">
<p>A <em>custom cloud service</em> is a class, so you need to create it.</p>
</div>
<div class="listingblock">
<div class="title">Class and constructor</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
  <td class="code"><pre>@Injectable() <i class="conum" data-value="1"></i><b>(1)</b>
export default class AvengersApi {
  /**
   * Constructor of our API
   */
  constructor(
    private stack: Stack,
    private messaging: Messaging,
    private groups: GroupManagement
  ) {
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We expose our custom cloud service with only one annotation</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The dependencies injection of ZetaPush use <code>injection-js</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_chat"><a class="anchor" href="#_create_the_chat"></a><a class="link" href="#_create_the_chat">16.2.3. Create the chat</a></h4>
<div class="paragraph">
<p>To create our chat, we use the <em>GroupManagement cloud service</em> provided by ZetaPush. The created group includes all users of the conversation.
So we add a method to our class to create this conversation.</p>
</div>
<div class="listingblock">
<div class="title">Create conversation</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>/**
 * Create the conversation of the chat, if doesn't already exists
 */
async createConversation() {
  const { exists } = await this.groups.exists({
    group: CONVERSATION_ID
  });
  if (!exists) {
    await this.groups.createGroup({
      group: CONVERSATION_ID
    });
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_add_user_to_the_conversation"><a class="anchor" href="#_add_user_to_the_conversation"></a><a class="link" href="#_add_user_to_the_conversation">16.2.4. Add user to the conversation</a></h4>
<div class="paragraph">
<p>When an user comes to the chat, we need to add it to the conversation.
So we create a method in our class to add the current user to the conversation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>/**
* Add the current user to the conversation
*/
addMeToConversation(parameters: any, context: any) { <i class="conum" data-value="1"></i><b>(1)</b>
  return this.groups.addUser({
    group: CONVERSATION_ID,
      user: context.owner <i class="conum" data-value="2"></i><b>(2)</b>
  });
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Each <em>custom cloud function</em> takes only one (client-provided) parameter. The second is the context, injected by the SDK</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We get the caller (owner) of the <em>cloud function</em> from the context.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_send_a_message"><a class="anchor" href="#_send_a_message"></a><a class="link" href="#_send_a_message">16.2.5. Send a message</a></h4>
<div class="paragraph">
<p>No we want to send a message on our chat. To do this, we need to follow 3 steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get all users in the conversation</p>
</li>
<li>
<p>Send the message of all users in the conversation</p>
</li>
<li>
<p>Store the message in a stack</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td>
  <td class="code"><pre>/**
* Send a message on the chat
* @param {Object} message
*/
async sendMessage(message = {}) {
  // Get all users inside the conversation
  const group = await this.groups.groupUsers({
    group: CONVERSATION_ID
  });
  const users = group.users;

  // Send the message to each user in the conversation
  this.messaging.send({
    target: users,
    channel: CHANNEL_MESSAGING,
    data: { message }
  });

  // Store the message in a stack
  await this.stack.push({
    stack: CONVERSATION_ID,
    data: message
  });

  return group;
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
There is no specific method to launch an attack, to do this, we only send a specific message throught <code>sendMessage</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_get_all_messages"><a class="anchor" href="#_get_all_messages"></a><a class="link" href="#_get_all_messages">16.2.6. Get all messages</a></h4>
<div class="paragraph">
<p>To complete our business logic, we need to have an other method in our class to get all messages (when we enter the chat).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>/**
* Get all messages in the conversation
*/
async getMessages() {
  const { result } = await this.stack.list({
    stack: CONVERSATION_ID
  });
  return result;
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now your <em>custom cloud service</em> is ready with this following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
</pre></td>
  <td class="code"><pre>import { Stack, Messaging, GroupManagement, Injectable } from &quot;@zetapush/platform&quot;;

const CONVERSATION_ID = &quot;avengersChat&quot;;
const CHANNEL_MESSAGING = &quot;avengersChannel&quot;;

@Injectable()
export default class AvengersApi {
  /**
   * Constructor of our API
   */
  constructor(
    private stack: Stack,
    private messaging: Messaging,
    private groups: GroupManagement
  ) {}

  /**
   * Create the conversation of the chat, if doesn't already exists
   */
  async createConversation() {
    const { exists } = await this.groups.exists({
      group: CONVERSATION_ID
    });
    if (!exists) {
      await this.groups.createGroup({
        group: CONVERSATION_ID
      });
    }
  }

  /**
   * Add the current user in the conversation
   */
  addMeToConversation(parameters: any, context: any) {
    return this.groups.addUser({
      group: CONVERSATION_ID,
      user: context.owner
    });
  }

  /**
   * Send a message on the chat
   * @param {Object} message
   */
  async sendMessage(message = {}) {
    // Get all users inside the conversation
    const group = await this.groups.groupUsers({
      group: CONVERSATION_ID
    });
    const users = group.users;

    // Send the message to each user in the conversation
    this.messaging.send({
      target: users,
      channel: CHANNEL_MESSAGING,
      data: { message }
    });

    // Store the message in a stack
    await this.stack.push({
      stack: CONVERSATION_ID,
      data: message
    });

    return group;
  }

  /**
   * Get all messages in the conversation
   */
  async getMessages() {
    const { result } = await this.stack.list({
      stack: CONVERSATION_ID
    });
    return result;
  }
}
</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_use_your_em_custom_cloud_services_em"><a class="anchor" href="#_use_your_em_custom_cloud_services_em"></a><a class="link" href="#_use_your_em_custom_cloud_services_em">16.3. Use your <em>custom cloud services</em></a></h3>
<div class="paragraph">
<p>Once we have our <em>custom cloud service</em>, we need to create the frontend of our application.</p>
</div>
<div class="sect3">
<h4 id="_launch_the_worker_locally"><a class="anchor" href="#_launch_the_worker_locally"></a><a class="link" href="#_launch_the_worker_locally">16.3.1. Launch the worker locally</a></h4>
<div class="paragraph">
<p>When we work on the frontend part, we often want to test our interaction with the backend logic.
With ZetaPush, you can launch your worker locally to test this interaction.
To do this you need to use the <em>CLI</em> and run: <code>zeta run</code>.
But in this project, the <em>CLI</em> is imported and a script is created with npm, so you just need to launch:</p>
</div>
<div class="listingblock">
<div class="title">Run worker locally</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">// In the root of the application
$ npm run start -- --serve-front</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you want to install the <em>ZetaPush CLI</em> you can run <code>npm install -g @zetapush/cli</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then you have access to your application on <code><a href="http://localhost:3000" class="bare">http://localhost:3000</a></code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_interaction_with_worker"><a class="anchor" href="#_interaction_with_worker"></a><a class="link" href="#_interaction_with_worker">16.3.2. Interaction with worker</a></h4>
<div class="paragraph">
<p>Now you just need to add the interaction with the <em>custom cloud service</em>. To do this, fill the file <code>front/index.js</code>:</p>
</div>
<div class="listingblock">
<div class="title">Interaction with worker</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> AvengersController from <span class="string"><span class="delimiter">'</span><span class="content">./utils/controller.js</span><span class="delimiter">'</span></span>; <i class="conum" data-value="1"></i><b>(1)</b>

<span class="comment">// Create the ZetaPush Client</span>
const client = <span class="keyword">new</span> ZetaPushClient.WeakClient();
<span class="comment">/**
 * Create service to listen incoming messages
 */</span>
const service = client.createService({
  <span class="key">Type</span>: ZetaPushPlatform.Messaging,
  <span class="key">listener</span>: {
    <span class="comment">// Listen incoming messages from the channel 'avengersChannel'</span>
    <span class="key">avengersChannel</span>: ({ data }) =&gt; controller.onAvengersMessage(data), <i class="conum" data-value="2"></i><b>(2)</b>
  },
});

const controller = <span class="keyword">new</span> AvengersController(client);

(async <span class="keyword">function</span> <span class="function">main</span>() {
  <span class="comment">// Expose to template</span>
  window.<span class="predefined">$controller</span> = controller;
  <span class="comment">// Connect to ZetaPush</span>
  await client.connect();
  <span class="comment">// Notify client connected</span>
  controller.onConnectionEstablished();
})();</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import the frontend logic (in the controller)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Cloud service provided by ZetaPush to listen to incoming messages</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_your_application"><a class="anchor" href="#_deploy_your_application"></a><a class="link" href="#_deploy_your_application">16.4. Deploy your application</a></h3>
<div class="paragraph">
<p>Your application is working but only locally. To deploy your application you just need to launch <code>zeta push</code>. In this application you already have a npm script so you can run:</p>
</div>
<div class="listingblock">
<div class="title">Deploy the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command deploys all in once (Front and Worker). It will return you an unique URL to access to your application.</p>
</div>
<div class="paragraph">
<p>Enjoy ! Your Avengers Chat is working and deployed !</p>
</div>
</div>
</div>
</div>
<h1 id="_guides" class="sect0"><a class="anchor" href="#_guides"></a><a class="link" href="#_guides">Guides</a></h1>

<h1 id="_faq" class="sect0"><a class="anchor" href="#_faq"></a><a class="link" href="#_faq">FAQ</a></h1>
<div class="openblock partintro">
<div class="content">
<div class="qlist qanda">
<ol>
<li>
<p><em>Do I have to develop <em>custom cloud services</em> ?</em></p>
<p>No. Developing <em>custom cloud services</em> is not required. You can use <em>cloud services</em> that are already provided by ZetaPush. You may need to develop <em>custom cloud services</em> in different situations:</p>
<div class="ulist">
<ul>
<li>
<p>You have several devices so you want to mutualize your business code</p>
</li>
<li>
<p>ZetaPush services are not fully compatible with your business needs</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_reference" class="sect0"><a class="anchor" href="#_reference"></a><a class="link" href="#_reference">Reference</a></h1>
<div class="sect1">
<h2 id="_command_line_interface"><a class="anchor" href="#_command_line_interface"></a><a class="link" href="#_command_line_interface">17. Command Line Interface</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_initialize_an_application"><a class="anchor" href="#_initialize_an_application"></a><a class="link" href="#_initialize_an_application">17.1. Initialize an application</a></h3>
<div class="paragraph">
<p>The command to initialize an application with the CLI is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush myApp <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>myApp</em> is the name of the generated directory</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This command can take the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>--developer-login</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This login is the email used by the developer when logging in to the ZetaPush console. It <strong>does not concern</strong> the applications developed by the developer. It is only used to identify the developer account.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>--developer-password</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Like the property <em>--developer-login</em>, this password is only used for the ZetaPush developer account. It <strong>does not concern</strong> the applications developed by the developer.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>--app-name</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A developer can develop many applications. Hence the need to identify each of them. The <em>appName</em> property is the unique name of an application on a ZetaPush developer account.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>--platform-url</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, the developer uses the <em>production environment of ZetaPush</em> to develop and deploy its applications. In most cases, the developer doesn&#8217;t need to set this property. <strong>This property if useful when another (on premise, or dedicated) ZetaPush platform is to be used.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>--env-name</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An application created by a developer can have many environments.
The default environment is <em>prod</em> but you can create your own (<em>dev</em>, <em>preprod</em>, &#8230;&#8203;).
An environment is one stage in the development of the application.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>--javascript</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This option allow developer to bootstrap project with a pure JavaScript stack. Default strategy is TypeScript.</p>
</div>
<div class="sect3">
<h4 id="_create_a_new_project_and_or_account"><a class="anchor" href="#_create_a_new_project_and_or_account"></a><a class="link" href="#_create_a_new_project_and_or_account">17.1.1. Create a new project and/or account</a></h4>
<div class="sect4">
<h5 id="_initialization_workflows"><a class="anchor" href="#_initialization_workflows"></a><a class="link" href="#_initialization_workflows">17.1.1.1. Initialization workflows</a></h5>
<div class="paragraph tab-container no-max-height">
<p>With or without account</p>
</div>
<div class="paragraph tab">
<p>Don&#8217;t have ZetaPush account</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="init-without-account.png" alt="init without account" width="378" height="459">
</div>
<div class="title">Figure 6. I want to create an account</div>
</div>
<div class="paragraph">
<p>➊ I launch <code>npm init @zetapush myApp</code> without parameters<br>
➋ You type your email and a password to create your ZetaPush account<br>
➌ The application is created in the <code>myApp</code> folder<br>
➍ The <em>.zetarc</em> file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerLogin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@gmail.com</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">appName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">nameOfAppAutoGenerated</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to confirm your ZetaPush account to run or deploy your application.
</td>
</tr>
</table>
</div>
<div class="paragraph tab">
<p>Have an account and an app</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="init-with-account-and-app.png" alt="init with account and app" width="495" height="351">
</div>
<div class="title">Figure 7. I want to use an existing application</div>
</div>
<div class="paragraph">
<p>➊ I launch <code>npm init @zetapush myApp</code> with the <code>--developer-login</code>, <code>--developer-password</code> and <code>--appName</code> parameters<br>
➋ The application is created in the <code>myApp</code> folder<br>
➌ The <em>.zetarc</em> file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerLogin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@gmail.com</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">appName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">nameOfAppAutoGenerated</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Have an account and want new app</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="init-with-account-without-app.png" alt="init with account without app" width="434" height="351">
</div>
<div class="title">Figure 8. I want to create a new application</div>
</div>
<div class="paragraph">
<p>➊ I launch <code>npm init @zetapush myApp</code> with the <code>--developer-login</code> and <code>--developer-password</code> parameters<br>
➋ The application is created in the <code>myApp</code> folder<br>
➌ The <em>.zetarc</em> file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerLogin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@gmail.com</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">developerPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">appName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If the <em>appName</em> property in the <em>.zetarc</em> is empty or missing, ZetaPush deploys or executes the code in a new application.
</td>
</tr>
</table>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</div>
<div class="sect4">
<h5 id="_create_a_new_account_and_a_new_application_2"><a class="anchor" href="#_create_a_new_account_and_a_new_application_2"></a><a class="link" href="#_create_a_new_account_and_a_new_application_2">17.1.1.2. Create a new account and a new application</a></h5>
<div class="listingblock">
<div class="title">Generate application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>first-hello-world</em> is the name of the folder that will be created with all the generated files</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will be prompted for a username and a password in order to create a new account.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Using npm lower than 6</strong></p>
</div>
<div class="paragraph">
<p><code>npm</code> provides <code>npm init</code> command since version 6.</p>
</div>
<div class="paragraph">
<p>You can either upgrade your npm version or use npx utility.</p>
</div>
<div class="paragraph tab-container">
<p>npm 5-</p>
</div>
<div class="paragraph tab">
<p>Upgrade npm</p>
</div>
<div class="listingblock">
<div class="title">Upgrade npm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm install -g npm@latest</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Use npm init</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Use <em>npx</em> to launch the script</p>
</div>
<div class="listingblock">
<div class="title">Launch with npx</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npx @zetapush/create first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_use_existing_account_and_application"><a class="anchor" href="#_use_existing_account_and_application"></a><a class="link" href="#_use_existing_account_and_application">17.1.1.3. Use existing account and application</a></h5>
<div class="listingblock">
<div class="title">Generate application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world <i class="conum" data-value="1"></i><b>(1)</b>
           --developer-login &lt;your email address&gt; <i class="conum" data-value="2"></i><b>(2)</b>
           --app-name &lt;your application name&gt; <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>first-hello-world</em> is the name of the folder that will be created with all the generated files</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><em>&lt;your email address&gt;</em> is the email you used when you registered on ZetaPush</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><em>&lt;your application name&gt;</em> is the application name registered on ZetaPush</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will be prompted for a password in order to log in to ZetaPush.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Using npm lower than 6</strong></p>
</div>
<div class="paragraph">
<p><code>npm</code> provides <code>npm init</code> command since version 6.</p>
</div>
<div class="paragraph">
<p>You can either upgrade your npm version or use npx utility.</p>
</div>
<div class="paragraph tab-container">
<p>npm 5-</p>
</div>
<div class="paragraph tab">
<p>Upgrade npm</p>
</div>
<div class="listingblock">
<div class="title">Upgrade npm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm install -g npm@latest</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Use npm init</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Use <em>npx</em> to launch the script</p>
</div>
<div class="listingblock">
<div class="title">Launch with npx</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npx @zetapush/create first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_add_an_application_to_my_account"><a class="anchor" href="#_add_an_application_to_my_account"></a><a class="link" href="#_add_an_application_to_my_account">17.1.1.4. Add an application to my account</a></h5>
<div class="listingblock">
<div class="title">Generate application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world <i class="conum" data-value="1"></i><b>(1)</b>
           --developer-login &lt;your email address&gt; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>first-hello-world</em> is the name of the folder that will be created with all the generated files</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><em>&lt;your email address&gt;</em> is the email you used when you registered on ZetaPush</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will be prompted for a password in order to log in to ZetaPush.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Using npm lower than 6</strong></p>
</div>
<div class="paragraph">
<p><code>npm</code> provides <code>npm init</code> command since version 6.</p>
</div>
<div class="paragraph">
<p>You can either upgrade your npm version or use npx utility.</p>
</div>
<div class="paragraph tab-container">
<p>npm 5-</p>
</div>
<div class="paragraph tab">
<p>Upgrade npm</p>
</div>
<div class="listingblock">
<div class="title">Upgrade npm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm install -g npm@latest</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Use npm init</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm init @zetapush first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab">
<p>Use <em>npx</em> to launch the script</p>
</div>
<div class="listingblock">
<div class="title">Launch with npx</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npx @zetapush/create first-hello-world</code></pre>
</div>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_project_locally"><a class="anchor" href="#_run_project_locally"></a><a class="link" href="#_run_project_locally">17.2. Run project locally</a></h3>
<div class="sect3">
<h4 id="_run_front_and_em_custom_cloud_services_em"><a class="anchor" href="#_run_front_and_em_custom_cloud_services_em"></a><a class="link" href="#_run_front_and_em_custom_cloud_services_em">17.2.1. Run front and <em>custom cloud services</em></a></h4>
<div class="listingblock">
<div class="title">Start application (front and custom cloud services)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run start -- --serve-front</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run start</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta run --serve-front</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_run_only_em_custom_cloud_services_em"><a class="anchor" href="#_run_only_em_custom_cloud_services_em"></a><a class="link" href="#_run_only_em_custom_cloud_services_em">17.2.2. Run only <em>custom cloud services</em></a></h4>
<div class="listingblock">
<div class="title">Start custom cloud services locally</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run start</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run start</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta run</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_project_on_the_zetapush_cloud"><a class="anchor" href="#_deploy_project_on_the_zetapush_cloud"></a><a class="link" href="#_deploy_project_on_the_zetapush_cloud">17.3. Deploy project on the ZetaPush Cloud</a></h3>
<div class="sect3">
<h4 id="_deploy_front_and_em_custom_cloud_services_em"><a class="anchor" href="#_deploy_front_and_em_custom_cloud_services_em"></a><a class="link" href="#_deploy_front_and_em_custom_cloud_services_em">17.3.1. Deploy front and <em>custom cloud services</em></a></h4>
<div class="listingblock">
<div class="title">Deploy application (front and custom cloud services)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run deploy</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta push</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_only_em_custom_cloud_services_em"><a class="anchor" href="#_deploy_only_em_custom_cloud_services_em"></a><a class="link" href="#_deploy_only_em_custom_cloud_services_em">17.3.2. Deploy only <em>custom cloud services</em></a></h4>
<div class="listingblock">
<div class="title">Deploy the worker</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy -- --worker</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run deploy</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta push --worker</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_only_front"><a class="anchor" href="#_deploy_only_front"></a><a class="link" href="#_deploy_only_front">17.3.3. Deploy only front</a></h4>
<div class="listingblock">
<div class="title">Deploy the worker</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ npm run deploy -- --front</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>npm run deploy</code> is a script alias defined in the <code>package.json</code> file.
The command that is executed under the hood is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ zeta push --front</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a><a class="link" href="#_configuration">18. Configuration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>ZetaPush provides many variables to configure your applications.
There are 2 types: the <em>account configuration variables</em> and the <em>application configuration variables</em>.</p>
</div>
<div class="sect2">
<h3 id="_account_configuration"><a class="anchor" href="#_account_configuration"></a><a class="link" href="#_account_configuration">18.1. Account configuration</a></h3>
<div class="paragraph">
<p>To use ZetaPush Celtia, you need to have an account and an optional application.
You specify this properties in the <code>.zetarc</code> file.
Here is the list of them:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Account variables</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Name of the property</th>
<th class="tableblock halign-center valign-middle">Definition</th>
<th class="tableblock halign-center valign-middle">environment variable</th>
<th class="tableblock halign-center valign-middle">Name in the <em>.zetarc</em></th>
<th class="tableblock halign-center valign-middle">CLI parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Developer login</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">This login is the email used by the developer when logging in to the ZetaPush console. It <strong>does not concern</strong> the applications developed by the developer. It is only used to identify the developer account.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_DEVELOPER_LOGIN</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">developerLogin</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--developer-login &lt;login&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Developer password</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Like the property <em>--developer-login</em>, this password is only used for the ZetaPush developer account. It <strong>does not concern</strong> the applications developed by the developer.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_DEVELOPER_PASSWORD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">developerLogin</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--developer-password &lt;password&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Developer login</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">A developer can develop many applications. Hence the need to identify each of them. The <em>appName</em> property is the unique name of an application on a ZetaPush developer account.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_APP_NAME</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">appName</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--app-name &lt;name&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Environment name</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">An application created by a developer can have many environments.
The default environment is <em>prod</em> but you can create your own (<em>dev</em>, <em>preprod</em>, &#8230;&#8203;).
An environment is one stage in the development of the application.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_ENV_NAME</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">envName</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--env-name &lt;env&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Platform URL</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">By default, the developer uses the <em>production environment of ZetaPush</em> to develop and deploy its applications. In most cases, the developer doesn&#8217;t need to set this property. <strong>This property if useful when another (on premise, or dedicated) ZetaPush platform is to be used.</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_PLATFORM_URL</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">platformUrl</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--platform-url &lt;platform&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_application_configuration"><a class="anchor" href="#_application_configuration"></a><a class="link" href="#_application_configuration">18.2. Application configuration</a></h3>
<div class="paragraph">
<p>You can configure your applications with several variables. Here is the list of them:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Application variables</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Name of the property</th>
<th class="tableblock halign-center valign-middle">Definition</th>
<th class="tableblock halign-center valign-middle"><em>package.json</em></th>
<th class="tableblock halign-center valign-middle">CLI parameter</th>
<th class="tableblock halign-center valign-middle">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>Front code</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>In an application, you need to define where you put your front end part of your application.
ZetaPush uses this property to host and expose it.</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="key"><span class="delimiter">&quot;</span><span class="content">zetapush</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">front</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./path/of/front</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>--front &lt;path&gt;</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><code>./front/</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>Worker code</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>When you create your business logic in <em>custom cloud services</em>, ZetaPush need to know his location to deploy it.</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="key"><span class="delimiter">&quot;</span><span class="content">zetapush</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">worker</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./path/of/worker</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>--worker &lt;path&gt;</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><code>./worker/</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>Worker entry point</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>To use your <em>custom cloud services</em> from the front part you need to export them. So the exportation of services need to be in only one file.</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="key"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./path/of/entry</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><code>./worker/index.ts</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_configuration_override"><a class="anchor" href="#_configuration_override"></a><a class="link" href="#_configuration_override">18.3. Configuration override</a></h3>
<div class="paragraph">
<p>You can put many properties in several locations (environment variables, CLI&#8230;&#8203;).
ZetaPush includes and overrides this properties in a specific order:</p>
</div>
<div class="sect3">
<h4 id="_account_properties"><a class="anchor" href="#_account_properties"></a><a class="link" href="#_account_properties">18.3.1. Account properties</a></h4>
<div class="imageblock center">
<div class="content">
<img src="override-account-properties.png" alt="override account properties" width="182" height="241">
</div>
</div>
<div class="paragraph">
<p>So if you use the same property in several locations, the environment variable is overwritten by the <code>.zetarc</code> value and this last value is overwritten by the CLI parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_application_properties"><a class="anchor" href="#_application_properties"></a><a class="link" href="#_application_properties">18.3.2. Application properties</a></h4>
<div class="imageblock center">
<div class="content">
<img src="override-application-properties.png" alt="override application properties" width="154" height="241">
</div>
</div>
<div class="paragraph">
<p>So if you use the same property in several locations, the default value is overwritten by the <code>package.json</code> value and this last value is overwritten by the CLI parameter.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_zetapush_cloud_services"><a class="anchor" href="#_zetapush_cloud_services"></a><a class="link" href="#_zetapush_cloud_services">19. ZetaPush Cloud Services</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. List of available cloud services</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Cloud service</th>
<th class="tableblock halign-center valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="#_user_management">User management</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">TODO: <a href="https://github.com/zetapush/documentation/issues/45" class="bare">https://github.com/zetapush/documentation/issues/45</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_user_management"><a class="anchor" href="#_user_management"></a><a class="link" href="#_user_management">19.1. User Management</a></h3>
<div class="paragraph">
<p>TODO: <a href="https://github.com/zetapush/documentation/issues/61" class="bare">https://github.com/zetapush/documentation/issues/61</a></p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-06-25 11:35:01 UTC
</div>
</div>
</body>
</html>